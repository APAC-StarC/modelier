{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/GalleryItemViewer.vue?f3e7","webpack:///./src/App.vue?de10","webpack:///./src/components/GalleryItemsPlayer.vue?1147","webpack:///src/components/GalleryItemsPlayer.vue","webpack:///./src/components/GalleryItemsPlayer.vue?168c","webpack:///./src/components/GalleryItemsPlayer.vue","webpack:///./src/components/GalleryItemViewer.vue?e338","webpack:///src/components/GalleryItemViewer.vue","webpack:///./src/components/GalleryItemViewer.vue?d9ed","webpack:///./src/components/GalleryItemViewer.vue?88a5","webpack:///./src/components/ExplosionPlayer.vue?0644","webpack:///src/components/ExplosionPlayer.vue","webpack:///./src/components/ExplosionPlayer.vue?824f","webpack:///./src/components/ExplosionPlayer.vue","webpack:///./src/components/ExplosionConfigurator.vue?90fa","webpack:///./src/components/ExplosionOptionItem.vue?0c26","webpack:///src/components/ExplosionOptionItem.vue","webpack:///./src/components/ExplosionOptionItem.vue?56d7","webpack:///./src/components/ExplosionOptionItem.vue","webpack:///src/components/ExplosionConfigurator.vue","webpack:///./src/components/ExplosionConfigurator.vue?5e9f","webpack:///./src/components/ExplosionConfigurator.vue","webpack:///./src/components/UndergroundDepictionsConfigurator.vue?61a1","webpack:///./src/components/UndergroundDepictionConfigItem.vue?f5cb","webpack:///src/components/UndergroundDepictionConfigItem.vue","webpack:///./src/components/UndergroundDepictionConfigItem.vue?3568","webpack:///./src/components/UndergroundDepictionConfigItem.vue","webpack:///src/components/UndergroundDepictionsConfigurator.vue","webpack:///./src/components/UndergroundDepictionsConfigurator.vue?27ce","webpack:///./src/components/UndergroundDepictionsConfigurator.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","viewer","defaultFOV","images","selectedImageUid","galleryItemsConfig","on","closeGalleryImage","staticClass","staticStyle","_v","_s","getFOV","_e","explosionCurrentStep","explosionSettings","ptPotreeReferences","setExplosionStep","toggleOn","toggleOff","model","callback","$$v","galleryOpen","expression","adminMode","saveOrientationOnSelectedImage","selectGalleryImage","depictionsOpen","undergroundDepictions","undergroundDepictionsSettings","saveToServer","class","isFullscreen","toggleFullScreen","saveInitialStateConfig","loadInitialStateConfig","explosionEnabled","galleryEnabled","depictionsEnabled","sidebarOpen","staticRenderFns","_l","item","uid","url","$event","$emit","title","selectedImage","id","components","Portal","props","component","style","opacity","imgHeight","Slider","computed","console","log","explosionStepInternal","explosionScaleStepDefault","explosionMoveStepDefault","watch","step","moveStep","scaleStep","entries","ptModels","forEach","opt","pt","scale","set","scaleSize","position","x","initPos","modifier","y","z","$set","ptId","directives","rawName","$$selectedVal","Array","filter","target","options","selected","map","val","_value","multiple","ExplosionOptionItem","udId","p1","p2","p3","p4","rot","anchorPoint","depictions","updateMesh","meshes","domProps","composing","_m","saveValues","initP1","clone","initP2","initP3","initP4","initZ","initRot","methods","x1","parseFloat","y1","x2","y2","x3","y3","x4","y4","parseInt","values","UndergroundDepictionConfigItem","Toggle","vectors","mounted","createVectors","createMeshes","rerenderMesh","mesh","centerX","centerY","rotateZ","angle","width","heigh","height","calcWidthHeight","getSelectedPoints","selectedPoints","t1","visible","renderDots","pointsArr","dotGeometry","dot","toArray","setAttribute","dotMaterial","meshDot","dots","ap","settings","getCookie","document","cookie","substring","cookieValue","decodeURIComponent","THREE","UndergroundDepictionsConfigurator","ExplosionConfigurator","ExplosionPlayer","GalleryItemsPlayer","GalleryItemViewer","scene","visConfig","potreeProjectConfig","orbitControls","annotationWaitingClick","explosionMoveStep","fullScreen","created","destroyed","removeEventListener","parentMessage","keyDown","e","code","pitchDelta","yawDelta","panDelta","mov","radiusDelta","zom","fov","setFOV","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","saveConfigOnServer","fetch","request","method","body","JSON","stringify","dataToSave","Potree","saveProject","initializeExplosionIfNewModel","pointclouds","direction","initialPos","addAnnotation","renderer","domElement","addEventListener","_this","hit","csvToFloatList","parts","res","openPotreeSidebar","$","left","click","closePotreeSidebar","imgUID","conf","viewTarget","viewPosition","setCameraMode","cameraMode","view","setView","targetStr","cameraPositionStr","browserWidth","clientWidth","browserHeight","clientHeight","render","getActiveCamera","Vue","use","VueCompositionAPI","config","productionTip","Viewer","getElementById","parse","textContent","setPointBudget","setMinNodeSize","setDescription","menuConf","visConf","toolsEnabled","loadGUI","then","setLanguage","showTools","next","html","hide","showScene","showFilters","showAbout","showAppearance","content","section","sections","description","last","first","slideToggle","append","h","AdminApp","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,oBAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,W,uHCAI,EAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAAEN,EAAoB,iBAAEI,EAAG,MAAM,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,SAAS,CAACF,EAAG,oBAAoB,CAACE,MAAM,CAAC,OAASN,EAAIO,OAAO,cAAcP,EAAIQ,WAAW,iBAAiBR,EAAIS,OAAOT,EAAIU,kBAAkB,sBAAsBV,EAAIW,mBAAmBX,EAAIU,mBAAmBE,GAAG,CAAC,eAAeZ,EAAIa,qBAAqBT,EAAG,MAAM,CAACU,YAAY,qDAAqDC,YAAY,CAAC,UAAU,SAAS,CAACf,EAAIgB,GAAG,OAAOhB,EAAIiB,GAAGjB,EAAIO,OAAOW,cAAc,IAAI,GAAGlB,EAAImB,KAAKf,EAAG,MAAM,CAAEJ,EAAoB,iBAAEI,EAAG,MAAM,CAACU,YAAY,mBAAmB,CAACV,EAAG,kBAAkB,CAACE,MAAM,CAAC,yBAAyBN,EAAIoB,qBAAqB,qBAAqBpB,EAAIqB,kBAAkB,uBAAuBrB,EAAIsB,oBAAoBV,GAAG,CAAC,yBAAyBZ,EAAIuB,qBAAqB,GAAGvB,EAAImB,KAAMnB,EAAkB,eAAEI,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,CAC59BkB,SAAU,2DACVC,UAAW,0DACZC,MAAM,CAAC1C,MAAOgB,EAAe,YAAE2B,SAAS,SAAUC,GAAM5B,EAAI6B,YAAYD,GAAKE,WAAW,iBAAkB9B,EAAe,YAAEI,EAAG,OAAO,CAACU,YAAY,kCAAkC,CAACd,EAAIgB,GAAG,kBAAkBhB,EAAImB,KAAOnB,EAAI6B,YAAgG7B,EAAImB,KAAvFf,EAAG,OAAO,CAACU,YAAY,kCAAkC,CAACd,EAAIgB,GAAG,mBAA4B,GAAGhB,EAAImB,KAAMnB,EAAIS,QAAUT,EAAI6B,YAAazB,EAAG,MAAM,CAACA,EAAG,qBAAqB,CAACE,MAAM,CAAC,iBAAiBN,EAAIS,OAAOT,EAAIU,kBAAkB,OAASV,EAAIS,OAAO,uBAAuBT,EAAIW,mBAAmB,OAASX,EAAIO,OAAO,aAAaP,EAAI+B,WAAWnB,GAAG,CAAC,yBAAyBZ,EAAIgC,+BAA+B,iBAAiBhC,EAAIiC,uBAAuB,GAAGjC,EAAImB,KAAMnB,EAAqB,kBAAEI,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,CAClxBkB,SAAU,2DACVC,UAAW,0DACZC,MAAM,CAAC1C,MAAOgB,EAAkB,eAAE2B,SAAS,SAAUC,GAAM5B,EAAIkC,eAAeN,GAAKE,WAAW,oBAAqB9B,EAAkB,eAAEI,EAAG,OAAO,CAACU,YAAY,kCAAkC,CAACd,EAAIgB,GAAG,gBAAgBhB,EAAImB,KAAOnB,EAAIkC,eAAiGlC,EAAImB,KAArFf,EAAG,OAAO,CAACU,YAAY,kCAAkC,CAACd,EAAIgB,GAAG,iBAA0B,GAAGhB,EAAImB,KAAMnB,EAAqB,kBAAEI,EAAG,MAAM,CAACA,EAAG,oCAAoC,CAACE,MAAM,CAAC,WAAaN,EAAImC,sBAAsB,SAAWnC,EAAIoC,8BAA8B,OAASpC,EAAIO,OAAO,cAAcP,EAAI+B,UAAU,eAAe/B,EAAIkC,gBAAgBtB,GAAG,CAAC,UAAUZ,EAAIqC,iBAAiB,GAAGrC,EAAImB,KAAKf,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACU,YAAY,2NAA2NwB,MAAM,CAAEtC,EAAIuC,aAAe,gBAAkB,eAAgBjC,MAAM,CAAC,KAAO,SAAS,eAAe,SAASM,GAAG,CAAC,MAAQZ,EAAIwC,mBAAmB,CAACpC,EAAG,OAAO,CAACU,YAAY,WAAW,CAACd,EAAIgB,GAAG,iBAAiBZ,EAAG,OAAO,CAACU,YAAY,6HAA6HwB,MAAM,CAAEtC,EAAIuC,aAAe,gBAAkB,iBAAkBjC,MAAM,CAAC,cAAc,YAAaN,EAAgB,aAAEI,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,sBAAsBhB,EAAImB,KAAOnB,EAAIuC,aAA4FvC,EAAImB,KAAlFf,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,qBAA+BhB,EAAa,UAAEI,EAAG,MAAM,CAACU,YAAY,wBAAwB,CAACV,EAAG,MAAM,CAACU,YAAY,wBAAwB,CAACV,EAAG,OAAO,CAACU,YAAY,iBAAiB,CAACd,EAAIgB,GAAG,kBAAkBZ,EAAG,MAAM,CAACU,YAAY,gEAAgE,CAACV,EAAG,SAAS,CAACU,YAAY,2OAA2OR,MAAM,CAAC,KAAO,UAAUM,GAAG,CAAC,MAAQZ,EAAIyC,yBAAyB,CAACzC,EAAIgB,GAAG,UAAUZ,EAAG,SAAS,CAACU,YAAY,sOAAsOR,MAAM,CAAC,KAAO,UAAUM,GAAG,CAAC,MAAQZ,EAAI0C,yBAAyB,CAAC1C,EAAIgB,GAAG,cAAcZ,EAAG,KAAK,CAACU,YAAY,oCAAoCV,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,CACpmFkB,SAAU,2DACVC,UAAW,0DACZC,MAAM,CAAC1C,MAAOgB,EAAoB,iBAAE2B,SAAS,SAAUC,GAAM5B,EAAI2C,iBAAiBf,GAAKE,WAAW,sBAAuB9B,EAAoB,iBAAEI,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,uBAAuBhB,EAAImB,KAAOnB,EAAI2C,iBAAqG3C,EAAImB,KAAvFf,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,yBAAkC,GAAIhB,EAAoB,iBAAEI,EAAG,MAAM,CAACA,EAAG,MAAM,CAACU,YAAY,sCAAsC,CAACV,EAAG,wBAAwB,CAACE,MAAM,CAAC,qBAAqBN,EAAIqB,sBAAsB,KAAKrB,EAAImB,KAAKf,EAAG,KAAK,CAACU,YAAY,qCAAqCV,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,CAC3pBkB,SAAU,2DACVC,UAAW,0DACZC,MAAM,CAAC1C,MAAOgB,EAAkB,eAAE2B,SAAS,SAAUC,GAAM5B,EAAI4C,eAAehB,GAAKE,WAAW,oBAAqB9B,EAAkB,eAAEI,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,qBAAqBhB,EAAImB,KAAOnB,EAAI4C,eAAiG5C,EAAImB,KAArFf,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,uBAAgC,GAAGZ,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,8BAA8BF,EAAG,KAAK,CAACU,YAAY,qCAAqCV,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,CACngBkB,SAAU,2DACVC,UAAW,0DACZC,MAAM,CAAC1C,MAAOgB,EAAqB,kBAAE2B,SAAS,SAAUC,GAAM5B,EAAI6C,kBAAkBjB,GAAKE,WAAW,uBAAwB9B,EAAqB,kBAAEI,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,iBAAiBhB,EAAImB,KAAOnB,EAAI6C,kBAAgG7C,EAAImB,KAAjFf,EAAG,OAAO,CAACU,YAAY,4BAA4B,CAACd,EAAIgB,GAAG,mBAA4B,GAAGZ,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,mCAAmCN,EAAImB,OAAOf,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,uBAAuB,CAACF,EAAG,MAAM,CAACkC,MAAM,CAACtC,EAAI8C,YAAc,OAAS,MAAO,mFAAmF/B,YAAY,CAAC,UAAU,OAAOT,MAAM,CAAC,GAAK,kCAAkC,IACzrByC,EAAkB,G,wMChBlB,EAAS,WAAa,IAAI/C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,+BAA+B,CAACF,EAAG,MAAM,CAACU,YAAY,uCAAuC,CAACd,EAAIgB,GAAG,mBAAmBZ,EAAG,MAAM,CAACU,YAAY,sCAAsCd,EAAIgD,GAAIhD,EAAU,QAAE,SAASiD,EAAKC,GAAK,OAAO9C,EAAG,MAAM,CAACd,IAAI,OAAO4D,EAAIpC,YAAY,QAAQ,CAACV,EAAG,MAAM,CAACU,YAAY,oDAAoDR,MAAM,CAAC,IAAM2C,EAAKE,KAAKvC,GAAG,CAAC,MAAQ,SAASwC,GAAQ,OAAOpD,EAAIqD,MAAM,iBAAiBH,OAAS9C,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACd,EAAIgB,GAAG,WAAWZ,EAAG,OAAO,CAACU,YAAY,wBAAwB,CAACd,EAAIgB,GAAGhB,EAAIiB,GAAGgC,EAAKK,YAAatD,EAAa,UAAEI,EAAG,MAAM,CAACU,YAAY,mDAAmD,CAACV,EAAG,SAAS,CAACU,YAAY,sBAAsBF,GAAG,CAAC,MAAQ,SAASwC,GAAQ,OAAOpD,EAAIqD,MAAM,yBAAyBH,MAAQ,CAAClD,EAAIgB,GAAG,yBAA0BhB,EAAIuD,eAAiBvD,EAAIuD,cAAcC,IAAIN,EAAK9C,EAAG,OAAO,CAACU,YAAY,iBAAiB,CAACd,EAAIgB,GAAG,YAAYhB,EAAImB,OAAOnB,EAAImB,UAAS,MAChkC,EAAkB,GCgBtB,GACE5C,KAAM,qBACNkF,WAAY,CACVC,OAAJ,QAEEvH,KALF,WAMI,MAAO,IAETwH,MAAO,CAAC,qBAAsB,SAAU,SAAU,gBAApD,cCzB4V,I,YCOxVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QClBX,EAAS,WAAa,IAAI5D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACU,YAAY,4BAA4B,CAACV,EAAG,MAAM,CAACU,YAAY,iBAAiB+C,MAAM,CAAE,QAAU7D,EAAI8D,QAAS,aAAa9D,EAAI+D,UAAY,MAAOzD,MAAM,CAAC,IAAMN,EAAIuD,cAAcJ,IAAI,MAAQ,UAAU/C,EAAG,MAAM,CAACU,YAAY,YAAY,CAACV,EAAG,SAAS,CAACW,YAAY,CAAC,MAAQ,SAAST,MAAM,CAAC,IAAM,GAAI,IAAM,EAAE,MAAQ,GAAGoB,MAAM,CAAC1C,MAAOgB,EAAW,QAAE2B,SAAS,SAAUC,GAAM5B,EAAI8D,QAAQlC,GAAKE,WAAW,aAAa1B,EAAG,SAAS,CAACU,YAAY,uFAAuFF,GAAG,CAAC,MAAQ,SAASwC,GAAQ,OAAOpD,EAAIqD,MAAM,mBAAmB,CAACrD,EAAIgB,GAAG,aAAa,MACnsB,EAAkB,G,YCYtB,GACEzC,KAAM,oBACNkF,WAAF,CACIO,OAAJ,QAEE7H,KALF,WAMI,MAAO,CACL2H,QAAS,KAGbH,MAAO,CAAC,gBAAiB,oBAA3B,UACEM,SAAF,CACIF,UAAJ,iBACA,4EACA,wCACA,OACMG,QAAQC,IAAI,8BAAlB,6FACM,IAAN,gCAEM,OADAD,QAAQC,IAAI,2BAA4BJ,GACjCA,KChC8U,ICSvV,G,oBAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCpBX,EAAS,WAAa,IAAI/D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,OAAO,CAACU,YAAY,sBAAsB,CAACd,EAAIgB,GAAG,uBAAuBZ,EAAG,SAAS,CAACE,MAAM,CAAC,UAAW,GAAOM,GAAG,CAAC,OAAS,SAASwC,GAAQ,OAAOpD,EAAIqD,MAAM,yBAA0BrD,EAAIoE,yBAA0B1C,MAAM,CAAC1C,MAAOgB,EAAyB,sBAAE2B,SAAS,SAAUC,GAAM5B,EAAIoE,sBAAsBxC,GAAKE,WAAW,4BAA4B,IACvc,EAAkB,GCStB,GACEvD,KAAM,sBACNkF,WAAY,CACVO,OAAJ,QAEE7H,KALF,WAMI,MAAO,CACLkI,0BAA2B,GAC3BC,yBAA0B,GAC1BF,sBAAN,IAGET,MAAO,CAAC,oBAAqB,qBAAsB,wBACnDY,MAAO,CACLnD,qBAAsB,WAA1B,eACMnB,KAAKmE,sBAAwBnE,KAAKmB,qBAClC,IAAN,4BACA,oJACA,uJACM8C,QAAQC,IAAI,8BAA+BK,EAAM,YAAaC,EAAU,aAAcC,GACtF9H,OAAO+H,QAAQ1E,KAAKoB,kBAAkBuD,UAAUC,SAAQ,SAA9D,2CACA,0BACA,cACA,eACA,MACQ,GAAY,UAARC,EAAiB,CACnB,IAAV,QACUC,EAAGC,MAAMC,IAAIC,EAAWA,EAAWA,GAEzB,UAARJ,IACFC,EAAGI,SAASC,EAAIC,EAAQD,EAAIE,GAElB,SAARR,IACFC,EAAGI,SAASC,EAAIC,EAAQD,EAAIE,GAElB,UAARR,IACFC,EAAGI,SAASI,EAAIF,EAAQE,EAAID,GAElB,SAARR,IACFC,EAAGI,SAASI,EAAIF,EAAQE,EAAID,GAElB,OAARR,IACFC,EAAGI,SAASK,EAAIH,EAAQG,EAAIF,GAElB,SAARR,IACFC,EAAGI,SAASK,EAAIH,EAAQG,EAAIF,SCvDmT,ICQrV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QCnBX,EAAS,WAAa,IAAItF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,OAAO,CAACU,YAAY,sBAAsB,CAACd,EAAIgB,GAAG,qBAAqBZ,EAAG,MAAM,CAACA,EAAG,SAAS,CAACsB,MAAM,CAAC1C,MAAOgB,EAAIqB,kBAAmC,kBAAEM,SAAS,SAAUC,GAAM5B,EAAIyF,KAAKzF,EAAIqB,kBAAmB,oBAAqBO,IAAME,WAAW,0CAA0C,GAAG1B,EAAG,OAAO,CAACU,YAAY,sBAAsB,CAACd,EAAIgB,GAAG,eAAehB,EAAIgD,GAAIhD,EAAIqB,kBAA0B,UAAE,SAAS4B,EAAKyC,GAAM,OAAOtF,EAAG,MAAM,CAACd,IAAI,WAAWoG,GAAM,CAACtF,EAAG,sBAAsB,CAACE,MAAM,CAAC,KAAO2C,EAAK,QAAQyC,MAAS,OAAM,IACrnB,EAAkB,GCDlB,EAAS,WAAa,IAAI1F,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACU,YAAY,oCAAoC,CAACV,EAAG,OAAO,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIiD,KAAKK,OAAO,OAAOlD,EAAG,SAAS,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAIiD,KAAc,UAAEnB,WAAW,mBAAmBhB,YAAY,oBAAoBF,GAAG,CAAC,OAAS,SAASwC,GAAQ,IAAIyC,EAAgBC,MAAMjJ,UAAUkJ,OAAOhJ,KAAKqG,EAAO4C,OAAOC,SAAQ,SAASxH,GAAG,OAAOA,EAAEyH,YAAWC,KAAI,SAAS1H,GAAG,IAAI2H,EAAM,WAAY3H,EAAIA,EAAE4H,OAAS5H,EAAEO,MAAM,OAAOoH,KAAOpG,EAAIyF,KAAKzF,EAAIiD,KAAM,YAAaG,EAAO4C,OAAOM,SAAWT,EAAgBA,EAAc,OAAO,CAACzF,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,GAAG,MAAQ,KAAK,CAACN,EAAIgB,GAAG,mBAAmBZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIgB,GAAG,eAAeZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIgB,GAAG,gBAAgBZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIgB,GAAG,eAAeZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIgB,GAAG,gBAAgBZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIgB,GAAG,eAAeZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACN,EAAIgB,GAAG,aAAaZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIgB,GAAG,qBAC1mC,EAAkB,GCgBtB,GACEzC,KAAM,sBACNoF,MAAO,CAAC,OAAV,QACExH,KAHF,WAII,MAAO,KCrBkV,ICOzV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QCDf,GACEoC,KAAM,4BACNkF,WAAY,CACVO,OAAJ,OACIuC,oBAAJ,GAEE5C,MAAO,CAAC,sBCvBqV,ICQ3V,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QCnBX,EAAS,WAAa,IAAI3D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEJ,EAAc,WAAEI,EAAG,MAAM,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,iCAAiCN,EAAIgD,GAAIhD,EAAW,SAAE,SAASiD,EAAKuD,GAAM,OAAOpG,EAAG,MAAM,CAACd,IAAI,eAAekH,EAAK1F,YAAY,6CAA6C,CAACV,EAAG,iCAAiC,CAACE,MAAM,CAAC,UAAU2C,EAAKwD,GAAG,UAAUxD,EAAKyD,GAAG,UAAUzD,EAAK0D,GAAG,UAAU1D,EAAK2D,GAAG,SAAS3D,EAAKuC,EAAE,WAAWvC,EAAK4D,IAAI,oBAAoB5D,EAAK6D,YAAY,KAAO9G,EAAI+G,WAAWP,GAAM,QAAQA,GAAM5F,GAAG,CAAC,sBAAsBZ,EAAIgH,eAAe,MAAK,IAAI,GAAGhH,EAAImB,KAAMnB,EAAe,YAAEI,EAAG,MAAM,CAACU,YAAY,QAAQd,EAAIgD,GAAIhD,EAAc,YAAE,SAASiD,EAAKuD,GAAM,OAAOpG,EAAG,MAAM,CAACd,IAAI,qBAAqBkH,EAAK1F,YAAY,aAAa,CAAEd,EAAIiH,OAAOT,GAAOpG,EAAG,MAAM,CAACU,YAAY,QAAQ,CAACV,EAAG,SAAS,CAACsB,MAAM,CAAC1C,MAAOgB,EAAIiH,OAAOT,GAAa,QAAE7E,SAAS,SAAUC,GAAM5B,EAAIyF,KAAKzF,EAAIiH,OAAOT,GAAO,UAAW5E,IAAME,WAAW,0BAA0B1B,EAAG,OAAO,CAACU,YAAY,uCAAuC,CAACd,EAAIgB,GAAGhB,EAAIiB,GAAGgC,EAAKK,WAAW,GAAGtD,EAAImB,UAAS,GAAGnB,EAAImB,QAChmC,EAAkB,G,YCDlB,EAAS,WAAa,IAAInB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACU,YAAY,wCAAwC,CAACV,EAAG,OAAO,CAACU,YAAY,2CAA2C,CAACd,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIiD,KAAKK,UAAUlD,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACV,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAIyG,GAAI,EAAE3E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAIyG,GAAI,GAAG7F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAIyG,GAAI,IAAKrD,EAAO4C,OAAOhH,aAAaoB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAIyG,GAAI,EAAE3E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAIyG,GAAI,GAAG7F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAIyG,GAAI,IAAKrD,EAAO4C,OAAOhH,eAAeoB,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACV,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI0G,GAAI,EAAE5E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI0G,GAAI,GAAG9F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI0G,GAAI,IAAKtD,EAAO4C,OAAOhH,aAAaoB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI0G,GAAI,EAAE5E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI0G,GAAI,GAAG9F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI0G,GAAI,IAAKtD,EAAO4C,OAAOhH,eAAeoB,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACV,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI2G,GAAI,EAAE7E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI2G,GAAI,GAAG/F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI2G,GAAI,IAAKvD,EAAO4C,OAAOhH,aAAaoB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI2G,GAAI,EAAE7E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI2G,GAAI,GAAG/F,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI2G,GAAI,IAAKvD,EAAO4C,OAAOhH,eAAeoB,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACV,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI4G,GAAI,EAAE9E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI4G,GAAI,GAAGhG,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI4G,GAAI,IAAKxD,EAAO4C,OAAOhH,aAAaoB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,UAAUZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAI4G,GAAI,EAAE9E,WAAW,SAASoF,SAAS,CAAC,MAASlH,EAAI4G,GAAI,GAAGhG,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,WAAqBnH,EAAIyF,KAAKzF,EAAI4G,GAAI,IAAKxD,EAAO4C,OAAOhH,eAAeoB,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACV,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,SAASZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAK,EAAE8B,WAAW,MAAMoF,SAAS,CAAC,MAASlH,EAAK,GAAGY,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,YAAqBnH,EAAIwF,EAAEpC,EAAO4C,OAAOhH,aAAYoB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,eAAeZ,EAAG,QAAQ,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAO,IAAE8B,WAAW,QAAQoF,SAAS,CAAC,MAASlH,EAAO,KAAGY,GAAG,CAAC,MAAQ,SAASwC,GAAWA,EAAO4C,OAAOmB,YAAqBnH,EAAI6G,IAAIzD,EAAO4C,OAAOhH,eAAcoB,EAAG,MAAM,CAACU,YAAY,sBAAsB,CAACd,EAAIoH,GAAG,GAAGhH,EAAG,MAAM,CAACA,EAAG,SAAS,CAACuF,WAAW,CAAC,CAACpH,KAAK,QAAQqH,QAAQ,UAAU5G,MAAOgB,EAAe,YAAE8B,WAAW,gBAAgBhB,YAAY,WAAWF,GAAG,CAAC,OAAS,SAASwC,GAAQ,IAAIyC,EAAgBC,MAAMjJ,UAAUkJ,OAAOhJ,KAAKqG,EAAO4C,OAAOC,SAAQ,SAASxH,GAAG,OAAOA,EAAEyH,YAAWC,KAAI,SAAS1H,GAAG,IAAI2H,EAAM,WAAY3H,EAAIA,EAAE4H,OAAS5H,EAAEO,MAAM,OAAOoH,KAAOpG,EAAI8G,YAAY1D,EAAO4C,OAAOM,SAAWT,EAAgBA,EAAc,MAAM,CAACzF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIgB,GAAG,QAAQZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIgB,GAAG,QAAQZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIgB,GAAG,QAAQZ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACN,EAAIgB,GAAG,cAAcZ,EAAG,SAAS,CAACQ,GAAG,CAAC,MAAQZ,EAAIqH,aAAa,CAACrH,EAAIgB,GAAG,eACr3H,EAAkB,CAAC,WAAa,IAAIhB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIgB,GAAG,sBCuCtI,GACEzC,KAAM,iCACNoF,MAAO,CAAC,OAAQ,OAAQ,SAAU,SAAU,SAAU,SAAU,QAAS,UAAW,mBACpFxH,KAHF,WAII,MAAO,CACLsK,GAAIxG,KAAKqH,OAAOC,QAChBb,GAAIzG,KAAKuH,OAAOD,QAChBZ,GAAI1G,KAAKwH,OAAOF,QAChBX,GAAI3G,KAAKyH,OAAOH,QAChB/B,EAAGvF,KAAK0H,MACRd,IAAK5G,KAAK2H,QACVd,YAAN,2DAGEe,QAAS,CACPR,WADJ,WAEMnD,QAAQC,IAAI,oBACZ,IAAN,GACQ2D,GAAIC,WAAW9H,KAAKwG,GAAGrB,GACvB4C,GAAID,WAAW9H,KAAKwG,GAAGlB,GACvB0C,GAAIF,WAAW9H,KAAKyG,GAAGtB,GACvB8C,GAAIH,WAAW9H,KAAKyG,GAAGnB,GACvB4C,GAAIJ,WAAW9H,KAAK0G,GAAGvB,GACvBgD,GAAIL,WAAW9H,KAAK0G,GAAGpB,GACvB8C,GAAIN,WAAW9H,KAAK2G,GAAGxB,GACvBkD,GAAIP,WAAW9H,KAAK2G,GAAGrB,GACvBC,EAAGuC,WAAW9H,KAAKuF,GACnBqB,IAAK0B,SAAStI,KAAK4G,KACnBC,YAAayB,SAAStI,KAAK6G,cAE7B7G,KAAKoD,MAAM,sBAAuBpD,KAAKuG,KAAMgC,MCtEqT,ICOpW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,oBCsBf,GACEjK,KAAM,oCACNkF,WAAY,CACVgF,+BAAJ,EACI/E,OAAJ,OACIgF,OAAJ,QAEE/E,MAAO,CAAC,WAAY,aAAc,SAAU,aAAc,eAC1DxH,KARF,WASI,MAAO,CACL8K,OAAQ,GACR0B,QAAS,OAGbC,QAdF,WAeI3I,KAAK4I,gBACL5I,KAAK6I,gBAEPjB,QAAS,CACPgB,cADJ,WACA,WACA,KACMjM,OAAO+H,QAAQ1E,KAAK8G,YAAYlC,SAAQ,SAA9C,oCACA,qEACA,8BACA,8BACA,8BACA,8BACA,MACA,QACQ8D,EAAQnC,GAAQ,CACdC,GAAV,EACUC,GAAV,EACUC,GAAV,EACUC,GAAV,EACUpB,EAAV,EACUqB,IAAV,MAGM5G,KAAK0I,QAAUA,GAEjBI,aAtBJ,SAsBA,iBAEMC,EAAK7D,SAASF,IAAIgE,EAASC,EAAS1D,GACpCwD,EAAKG,QAAQC,EAAnB,KAA2B,EAA3B,KACMJ,EAAKK,MAAQA,EACbL,EAAKM,MAAQC,EACbP,EAAK7D,SAASF,IAAIgE,EAASC,EAAS1D,IAItCgE,gBAhCJ,SAgCA,OACM,IAAN,kBACA,kBACA,8BACA,8BACA,8BACM,MAAO,CAAb,+CAEIC,kBAxCJ,SAwCA,WACM,IAAN,EACM,OAAQ3C,GACN,KAAK,EACH4C,EAAiB,CAACjD,EAA5B,KACU,MACF,KAAK,EACHiD,EAAiB,CAAChD,EAA5B,KACU,MACF,KAAK,EACHgD,EAAiB,CAAC/C,EAA5B,KACU,MACF,KAAK,EACH+C,EAAiB,CAAC9C,EAAIH,EAAhC,GACU,MACF,QACEiD,EAAiB,CAACjD,EAA5B,KAEM,IAAN,+CACM,MAAO,CAACkD,EAAd,MAEIb,aA7DJ,WA6DA,WACMlM,OAAO+H,QAAQ1E,KAAK8G,YAAYlC,SAAQ,SAA9C,2CACQ,GAAK,EAAb,YAAQ,CAKA,IAAR,2CACA,8BACA,IAEA,4EAEA,kFAEA,8BACA,uCACA,oFACA,qBAEQmE,EAAKY,SAAU,EACf,EAAR,0BACQ,EAAR,8BACQ,EAAR,iBAUIC,WA9FJ,SA8FA,GACM,IAAN,KAUM,OATAC,EAAUjF,SAAQ,SAAxB,GACQ,IAAIkF,EAAc,IAAI,EAA9B,kBACQ7F,QAAQC,IAAI,6BAA8B6F,EAAIC,WAC9CF,EAAYG,aAAa,WAAjC,gEACQH,EAAYG,aAAa,OAAjC,4CACQ,IAAIC,EAAc,IAAI,EAA9B,6BACYC,EAAU,IAAI,EAA1B,eACQC,EAAKpN,KAAKmN,MAELC,GAETrD,WA3GJ,SA2GA,KACM,IAAN,8BACA,8BACA,8BACA,8BACA,8BACA,OACM/G,KAAK0I,QAAQnC,GAAQ,CACnBC,GAAR,EACQC,GAAR,EACQC,GAAR,EACQC,GAAR,EACQpB,EAAR,EACQqB,IAAR,EACQC,YAAawD,GAEfrK,KAAKsK,SAAS/D,GAAQ,CACpBsB,GAAIrB,EAAGrB,EACP4C,GAAIvB,EAAGlB,EACP0C,GAAIvB,EAAGtB,EACP8C,GAAIxB,EAAGnB,EACP4C,GAAIxB,EAAGvB,EACPgD,GAAIzB,EAAGpB,EACP8C,GAAIzB,EAAGxB,EACPkD,GAAI1B,EAAGrB,EACPC,EAAR,EACQqB,IAAR,EACQC,YAAawD,GAEfpG,QAAQC,IAAI,+BAAgCmG,GAC5C,IAAN,+EACMpG,QAAQC,IAAI,aAAc,CAACwF,EAAjC,MACM,IAAN,qFACA,iBACM1J,KAAKoD,MAAM,UAAW,cACtBpD,KAAK8I,aAAaC,EAAMK,EAAOE,EAAQH,EAAOvC,EAAKrB,EAAGyD,EAASC,MCxMsS,ICQvW,I,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,QCoIf,SAASsB,GAAUjM,GACjB,IAAF,OACE,GAAIkM,SAASC,QAA8B,KAApBD,SAASC,OAE9B,IADA,IAAJ,6BACA,oBACM,IAAN,cAEM,GAAIA,EAAOC,UAAU,EAAGpM,EAAK5B,OAAS,KAAO,EAAnD,KACQiO,EAAcC,mBAAmBH,EAAOC,UAAUpM,EAAK5B,OAAS,IAChE,OAIN,OAAOiO,EAfT/K,OAAOiL,MAAQ,EAkBf,uBACA,gEASA,IACEvM,KAAM,MACNkF,WAAY,CACVsH,kCAAJ,GACIC,sBAAJ,EACIC,gBAAJ,EACIC,mBAAJ,EACIC,kBAAJ,EACIzH,OAAJ,OACIgF,OAAJ,QAEEvM,KAXF,WAYI,MAAO,CAELoE,OAAQV,OAAOU,OACf6K,MAAO,KACPC,UAAWA,GACXC,oBAAqB,KACrBC,cAAe1L,OAAOU,OAAOgL,cAE7B/K,WAAY,GACZqB,aAAa,EACbK,gBAAgB,EAChBH,UAAWlC,OAAOkC,UAGlBY,kBAAkB,EAClBC,gBAAgB,EAChBC,mBAAmB,EACnB2I,wBAAwB,EACxBnK,kBAAmB,CACjBoK,kBAAmB,IAErBrK,qBAAsB,EACtBX,OAAQ,GACRE,mBAAoB,GACpBD,iBAAkB,KAClBY,mBAAoB,GACpBc,8BAA+B,KAGnCmC,MAAO,CACL1C,YAAa,SAAjB,GACA,IACQ5B,KAAKO,WAAaP,KAAKM,OAAOW,YAIpC+C,SAAU,CAERnB,YAAa,WAEX,OAAO7C,KAAK4B,aAEdU,aAAc,WACZ,OAAO1C,OAAO6L,aAGlBC,QAAS,WAAX,kKAGA,8BAHA,OAcA,yBACA,+BACA,6CACA,gDAGA,gBACA,sDArBA,qGAAW,GAuBTC,UAAW,WACT/L,OAAOgM,oBAAoB,UAAW5L,KAAK6L,gBAE7CjE,QAAS,CAmBPkE,QAAS,SAAb,GACM,IAAN,MACA,MACA,OACA,uBACM,OAAQC,EAAEC,MACR,IAAK,OACL,IAAK,YAIHhM,KAAKsL,cAAcW,YAAcrF,EACjC,MACF,IAAK,OACL,IAAK,UAIH5G,KAAKsL,cAAcW,YAAcrF,EACjC,MACF,IAAK,OACL,IAAK,YAEH5G,KAAKsL,cAAcY,UAAYtF,EAE/B,MACF,IAAK,OACL,IAAK,aAEH5G,KAAKsL,cAAcY,UAAYtF,EAE/B,MACF,IAAK,OACH5G,KAAKsL,cAAca,SAAS7G,GAAK8G,EACjC,MACF,IAAK,OACHpM,KAAKsL,cAAca,SAAS7G,GAAK8G,EACjC,MACF,IAAK,OACHpM,KAAKsL,cAAca,SAAShH,GAAKiH,EACjC,MACF,IAAK,OACHpM,KAAKsL,cAAca,SAAShH,GAAKiH,EACjC,MACF,IAAK,OACHpM,KAAKsL,cAAce,aAAeC,EAClC,MACF,IAAK,OACHtM,KAAKsL,cAAce,aAAeC,EAClC,MACF,IAAK,OACCC,EAAM,KACRvM,KAAKM,OAAOkM,OAAOD,EAAM,GAE3B,MACF,IAAK,OACCA,EAAM,GACRvM,KAAKM,OAAOkM,OAAOD,EAAM,GAE3B,QAINhK,iBAAkB,WACXiI,SAASiC,kBAGRjC,SAASkC,gBACXlC,SAASkC,iBAHXlC,SAASmC,gBAAgBC,qBAO7BtL,iBAAkB,SAAtB,GACMtB,KAAKmB,qBAAuBoD,GAE9BsI,mBAAoB,WAIlB,IAAN,GACQ,OAAU7M,KAAKqL,oBACf,eAAkB,CAChB,iBAAoBrL,KAAK0C,iBACzB,eAAkB1C,KAAK2C,eACvB,kBAAqB3C,KAAK4C,kBAC1B,kBAAqB5C,KAAKoB,kBAC1B,qBAAwBpB,KAAKU,mBAC7B,8BAAiCV,KAAKmC,gCAGhD,kBACA,cACA,EACA,CAAQ,QAAR,CAAU,cAAV,MAEM2K,MAAMC,EAAS,CACbC,OAAQ,OACRC,KAAMC,KAAKC,UAAUC,GACrBnO,KAAM,gBACd,iBACQgF,QAAQC,IAAI,6BAIhB9B,aA3HJ,WA4HMpC,KAAK6M,sBAEPrK,uBAAwB,WACtBxC,KAAKqL,oBAAsBzL,OAAOyN,OAAOC,YAAYtN,KAAKM,QAE1DN,KAAK6M,sBAEPpK,uBAAwB,WAA5B,6MAeA,IAdA,kEACA,gGACA,sFACA,+FAEA,2BAGA,kDACA,KAIA,KACA,uGACA,aAMA,IAtBA,aAsBA,2CACA,kDACA,KACA,kBAEA,QALA,oEAtBA,IA+BA,EA/BA,wBAiCA,gBACA,iBAlCA,UAmCA,yCAnCA,eAuCA,KAEA,sCACA,yCACA,UACA,oBACA,0BACA,iDA9CA,UAiDA,eAjDA,QAuDA,mDACA,YACA,0BACA,sCAEA,0BAGA,6GACA,uGACA,mGACA,yGACA,wEACA,oGAEA,oFACA,4FAvEA,sGAA4B,GA0ExB8K,8BAA+B,SAAnC,GACWvN,KAAKoB,kBAAkBuD,WAC1B3E,KAAKoB,kBAAkBuD,SAAW,IAE/B3E,KAAKoB,kBAAkBuD,SAASc,KACnCzF,KAAKoB,kBAAkBuD,SAASc,GAAQ,CACtCpC,MAAOrD,KAAKoL,UAAUoC,YAAY/H,GAAMpC,MACxCoK,UAAW,GACXhI,KAAMA,EACNiI,WAAY1N,KAAKqB,mBAAmBoE,GAAMP,SAASoC,WAIzDqG,cAAe,WAAnB,WACM3N,KAAKuL,wBAAyB,EAC9B,IAAN,OACMvL,KAAKM,OAAOsN,SAASC,WAAWC,iBAAiB,aAAa,WAC5DC,EAAMxC,wBAAyB,EAO/B,IAAR,8BACA,mCAEA,8FAGoB,OAARyC,GACF,EAAV,4BACA,aACA,aACA,cACA,CACY,MAAS,IAArB,2EACY,QAAW,OAGvB,YAEIC,eAAgB,SAApB,GACM,IAAN,eACM,IAAKC,EAAMxR,OACT,OAAO,KAET,IAAN,qBACQ,OAAOoL,WAAWhD,MAEpB,OAAOqJ,GAETC,kBAAmB,WACbxO,OAAOyO,EAAE,uBAAuBnJ,WAAWoJ,MAAQ,GACrD1O,OAAOyO,EAAE,uBAAuBE,SAGpCC,mBAAoB,WACd5O,OAAOyO,EAAE,uBAAuBnJ,WAAWoJ,KAAO,GACpD1O,OAAOyO,EAAE,uBAAuBE,SAGpCvM,mBAAoB,SAAxB,GACMhC,KAAKwO,qBACLxO,KAAKS,iBAAmBgO,EACxB,IAAN,6BACUC,GACEA,EAAKC,YAAcD,EAAKE,eAC1B5O,KAAKM,OAAOuO,cAAcH,EAAKI,YAC/B9O,KAAKM,OAAO6K,MAAM4D,KAAKC,QAAQhP,KAAKiO,eAAeS,EAAKE,cAAe5O,KAAKiO,eAAeS,EAAKC,aAChG3O,KAAKM,OAAOkM,OAAOkC,EAAKnC,KAAOvM,KAAKO,cAI1CK,kBAAmB,WACjBZ,KAAKS,iBAAmB,KACxBT,KAAKM,OAAOkM,OAAOxM,KAAKO,aAE1BwB,+BAAgC,SAApC,GACM,IAAN,uDACA,yDACA,+BACA,uBACW/B,KAAKU,mBAAmB+N,KAC3BzO,KAAKU,mBAAmB+N,GAAU,IAEpCzO,KAAKU,mBAAmB+N,GAAQE,WAAaM,EAC7CjP,KAAKU,mBAAmB+N,GAAQG,aAAeM,EAC/ClP,KAAKU,mBAAmB+N,GAAQK,WAAaA,EAC7C9O,KAAKU,mBAAmB+N,GAAQU,aAAe3E,SAASmC,gBAAgByC,YACxEpP,KAAKU,mBAAmB+N,GAAQY,cAAgB7E,SAASmC,gBAAgB2C,aACzEtP,KAAKU,mBAAmB+N,GAAQlC,IAAMA,EACtCvM,KAAK6M,sBAEPhB,cAAJ,YAEM,GADA5H,QAAQC,IAAI6H,GAClB,wBACQ,IAAR,eACQ,KAAR,oBAEM,GAAN,wBACQ,IAAR,eACQ,KAAR,cAEM,GAAN,oBACQ,IAAR,eACQ,KAAR,oBACQ,KAAR,mBAIIwD,OAAQ,WACNvP,KAAKM,OAAOsN,SAAS2B,OAAOvP,KAAKM,OAAO6K,MAAMA,MAAOnL,KAAKM,OAAO6K,MAAMqE,sBClkBiP,MCQ1T,I,UAAY,eACd,GACA,EACA1M,GACA,EACA,KACA,KACA,OAIa,M,qBChBf2M,aAAIC,IAAIC,SAGRF,aAAIG,OAAOC,eAAgB,EAQ3B,IAAIxB,GAAIzO,OAAOyO,EACXhB,GAASzN,OAAOyN,OACpBzN,OAAOU,OAAS,IAAI+M,GAAOyC,OAAOtF,SAASuF,eAAe,uBAC1D,IAAM3E,GAAY8B,KAAK8C,MAAMxF,SAASuF,eAAe,aAAaE,aAE9D3P,GAASV,OAAOU,OACpBA,GAAOkM,OAAO,IACdlM,GAAO4P,eAAe,KACtB5P,GAAO6P,eAAe,GAEtB7P,GAAO8P,eAAehF,GAAU/H,OAGhC,IAAQgN,GAAsBjF,GAAtBiF,SAAUC,GAAYlF,GAAZkF,QACdD,GAASE,cACTjQ,GAAOkQ,UAAUC,MAAK,WAClBnQ,GAAOoQ,YAAY,MACdL,GAASM,YACVtC,GAAE,eAAeuC,OAAOC,KAAK,IAC7BxC,GAAE,eAAeyC,QAEhBT,GAASU,YACV1C,GAAE,eAAeuC,OAAOC,KAAK,IAC7BxC,GAAE,eAAeyC,QAEhBT,GAASW,cACV3C,GAAE,iBAAiBuC,OAAOC,KAAK,IAC/BxC,GAAE,iBAAiByC,QAElBT,GAASY,UAIV5C,GAAE,eAAewC,KAAK,iBAHtBxC,GAAE,eAAeuC,OAAOC,KAAK,IAC7BxC,GAAE,eAAeyC,QAIhBT,GAASa,iBACV7C,GAAE,oBAAoBuC,OAAOC,KAAK,IAClCxC,GAAE,oBAAoByC,QAG1B,IAAIK,EAASC,EAASC,EAAW,GACjC,GAAIf,GAAQgB,YAAY,CACpB,IAAIF,EAAU/C,GAAE,oNAIZ8C,EAAUC,EAAQG,OACtBJ,EAAQN,KAAKP,GAAQgB,aACrBF,EAAQI,QAAQjD,OAAM,kBAAM4C,EAAQM,iBACpCJ,EAASrU,KAAKoU,GAElBA,EAAU/C,GAAE,+KAIZ8C,EAAUC,EAAQG,OAClBJ,EAAQN,KAAR,0DAIAO,EAAQI,QAAQjD,OAAM,kBAAM4C,EAAQM,iBACpCJ,EAASrU,KAAKoU,GAEdC,EAASzM,SAAQ,SAAAwM,GAAO,OAAI/C,GAAE,gBAAgBqD,OAAON,MAGrD,IAAI3B,aAAI,CACNF,OAAQ,SAAAoC,GAAC,OAAIA,EAAEC,OACdC,OAAO,gB","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/vue/dist/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItemViewer.vue?vue&type=style&index=0&id=9ad89464&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.selectedImageUid)?_c('div',[_c('portal',{attrs:{\"selector\":\"body\"}},[_c('GalleryItemViewer',{attrs:{\"viewer\":_vm.viewer,\"default-fov\":_vm.defaultFOV,\"selected-image\":_vm.images[_vm.selectedImageUid],\"selected-image-conf\":_vm.galleryItemsConfig[_vm.selectedImageUid]},on:{\"image-closed\":_vm.closeGalleryImage}}),_c('div',{staticClass:\"absolute bottom-0 py-2 text-white bg-gray-800 px-3\",staticStyle:{\"z-index\":\"1000\"}},[_vm._v(\"FOV:\"+_vm._s(_vm.viewer.getFOV()))])],1)],1):_vm._e(),_c('div',[(_vm.explosionEnabled)?_c('div',{staticClass:\"text-white mt-4\"},[_c('ExplosionPlayer',{attrs:{\"explosion-current-step\":_vm.explosionCurrentStep,\"explosion-settings\":_vm.explosionSettings,\"pt-potree-references\":_vm.ptPotreeReferences},on:{\"explosion-step-changed\":_vm.setExplosionStep}})],1):_vm._e(),(_vm.galleryEnabled)?_c('div',{staticClass:\"mt-4 flex\"},[_c('Toggle',{attrs:{\"classes\":{\n                      toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                      toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                  }},model:{value:(_vm.galleryOpen),callback:function ($$v) {_vm.galleryOpen=$$v},expression:\"galleryOpen\"}}),(_vm.galleryOpen)?_c('span',{staticClass:\"text-sm font-medium pl-4 block\"},[_vm._v(\"Hide Gallery\")]):_vm._e(),(!_vm.galleryOpen)?_c('span',{staticClass:\"text-sm font-medium pl-4 block\"},[_vm._v(\"Show Gallery\")]):_vm._e()],1):_vm._e(),(_vm.images && _vm.galleryOpen)?_c('div',[_c('GalleryItemsPlayer',{attrs:{\"selected-image\":_vm.images[_vm.selectedImageUid],\"images\":_vm.images,\"gallery-items-config\":_vm.galleryItemsConfig,\"viewer\":_vm.viewer,\"admin-mode\":_vm.adminMode},on:{\"save-image-orientation\":_vm.saveOrientationOnSelectedImage,\"image-selected\":_vm.selectGalleryImage}})],1):_vm._e(),(_vm.depictionsEnabled)?_c('div',{staticClass:\"flex mt-4\"},[_c('Toggle',{attrs:{\"classes\":{\n                      toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                      toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                  }},model:{value:(_vm.depictionsOpen),callback:function ($$v) {_vm.depictionsOpen=$$v},expression:\"depictionsOpen\"}}),(_vm.depictionsOpen)?_c('span',{staticClass:\"text-sm font-medium pl-4 block\"},[_vm._v(\"GPR Meshes\")]):_vm._e(),(!_vm.depictionsOpen)?_c('span',{staticClass:\"text-sm font-medium pl-4 block\"},[_vm._v(\"GPR Meshes\")]):_vm._e()],1):_vm._e(),(_vm.depictionsEnabled)?_c('div',[_c('UndergroundDepictionsConfigurator',{attrs:{\"depictions\":_vm.undergroundDepictions,\"settings\":_vm.undergroundDepictionsSettings,\"viewer\":_vm.viewer,\"show-config\":_vm.adminMode,\"show-gallery\":_vm.depictionsOpen},on:{\"on-save\":_vm.saveToServer}})],1):_vm._e(),_c('div',{staticClass:\"flex mt-4\"},[_c('button',{staticClass:\"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",class:[ _vm.isFullscreen ? 'bg-indigo-600' : 'bg-gray-200' ],attrs:{\"type\":\"button\",\"aria-pressed\":\"false\"},on:{\"click\":_vm.toggleFullScreen}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Use setting\")]),_c('span',{staticClass:\"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200\",class:[ _vm.isFullscreen ? 'translate-x-5' : 'translate-x-0' ],attrs:{\"aria-hidden\":\"true\"}})]),(_vm.isFullscreen)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Close Fullscreen\")]):_vm._e(),(!_vm.isFullscreen)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Go Fullscreen\")]):_vm._e()]),(_vm.adminMode)?_c('div',{staticClass:\"py-2 mt-6 text-white\"},[_c('div',{staticClass:\"flex justify-between\"},[_c('span',{staticClass:\"font-semibold\"},[_vm._v(\"Admin config\")]),_c('div',{staticClass:\"relative z-0 inline-flex shadow-sm rounded-md flex flex-wrap\"},[_c('button',{staticClass:\"-ml-px relative inline-flex items-center p-1 mr-2 rounded-md border border-gray-300 bg-white text-md font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.saveInitialStateConfig}},[_vm._v(\" ðŸ’¾ \")]),_c('button',{staticClass:\"-ml-px relative inline-flex items-center p-1 rounded-md border border-gray-300 bg-white text-md font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.loadInitialStateConfig}},[_vm._v(\" ðŸ” \")])])]),_c('hr',{staticClass:\"border-2 border-white mt-4 mb-4\"}),_c('div',{staticClass:\"flex mt-2\"},[_c('Toggle',{attrs:{\"classes\":{\n                      toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                      toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                  }},model:{value:(_vm.explosionEnabled),callback:function ($$v) {_vm.explosionEnabled=$$v},expression:\"explosionEnabled\"}}),(_vm.explosionEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Explosion Enabled\")]):_vm._e(),(!_vm.explosionEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Explosion Disabled\")]):_vm._e()],1),(_vm.explosionEnabled)?_c('div',[_c('div',{staticClass:\"mt-2 flex flex-col justify-stretch\"},[_c('ExplosionConfigurator',{attrs:{\"explosion-settings\":_vm.explosionSettings}})],1)]):_vm._e(),_c('hr',{staticClass:\"border border-blue-600 mt-4 mb-4\"}),_c('div',{staticClass:\"flex mt-4\"},[_c('Toggle',{attrs:{\"classes\":{\n                      toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                      toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                  }},model:{value:(_vm.galleryEnabled),callback:function ($$v) {_vm.galleryEnabled=$$v},expression:\"galleryEnabled\"}}),(_vm.galleryEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Gallery Enabled\")]):_vm._e(),(!_vm.galleryEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"Gallery Disabled\")]):_vm._e()],1),_c('div',{attrs:{\"id\":\"cyi-tools-gallery-config\"}}),_c('hr',{staticClass:\"border border-blue-600 mt-4 mb-4\"}),_c('div',{staticClass:\"flex mt-2\"},[_c('Toggle',{attrs:{\"classes\":{\n                      toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                      toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                  }},model:{value:(_vm.depictionsEnabled),callback:function ($$v) {_vm.depictionsEnabled=$$v},expression:\"depictionsEnabled\"}}),(_vm.depictionsEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"GPR Enabled\")]):_vm._e(),(!_vm.depictionsEnabled)?_c('span',{staticClass:\"text-sm font-medium pl-4\"},[_vm._v(\"GPR Disabled\")]):_vm._e()],1),_c('div',{attrs:{\"id\":\"cyi-tools-depictions-config\"}})]):_vm._e()]),_c('portal',{attrs:{\"selector\":\"#cyi-tools-sidebar\"}},[_c('div',{class:[_vm.sidebarOpen ? 'w-56' : 'w-0', 'fixed top-0 bottom-0 right-0 bg-gray-800 flex flex-col text-white overflow-auto'],staticStyle:{\"z-index\":\"100\"},attrs:{\"id\":\"cyi-tools-sidebar-content\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('portal',{attrs:{\"selector\":\"#cyi-tools-sidebar-content\"}},[_c('div',{staticClass:\"text-xs px-2 py-2 bg-gray-900 w-100\"},[_vm._v(\"Photo Gallery\")]),_c('div',{staticClass:\"flex flex-col justify-stretch px-2\"},_vm._l((_vm.images),function(item,uid){return _c('div',{key:'img-'+uid,staticClass:\"mt-4\"},[_c('img',{staticClass:\"w-100 w-max-100 rounded-sm border border-gray-200\",attrs:{\"src\":item.url},on:{\"click\":function($event){return _vm.$emit('image-selected',uid)}}}),_c('div',{staticClass:\"block text-xs mt-2\"},[_vm._v(\"Title: \"),_c('span',{staticClass:\"italic font-semibold\"},[_vm._v(_vm._s(item.title))])]),(_vm.adminMode)?_c('div',{staticClass:\"mt-2 flex justify-between text-sm font-semibold\"},[_c('button',{staticClass:\"text-red-600 italic\",on:{\"click\":function($event){return _vm.$emit('save-image-orientation',uid)}}},[_vm._v(\"Save orientation...\")]),(_vm.selectedImage && _vm.selectedImage.id==uid)?_c('span',{staticClass:\"text-blue-700\"},[_vm._v(\"Active\")]):_vm._e()]):_vm._e()])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <portal selector=\"#cyi-tools-sidebar-content\">\r\n    <div class=\"text-xs px-2 py-2 bg-gray-900 w-100\">Photo Gallery</div>\r\n    <div class=\"flex flex-col justify-stretch px-2\">\r\n      <div class=\"mt-4\" v-for=\"(item, uid) in images\" v-bind:key=\"'img-'+uid\">\r\n        <img class=\"w-100 w-max-100 rounded-sm border border-gray-200\" v-bind:src=\"item.url\"\r\n             v-on:click=\"$emit('image-selected',uid)\"/>\r\n        <div class=\"block text-xs mt-2\">Title: <span class=\"italic font-semibold\">{{ item.title }}</span></div>\r\n        <div class=\"mt-2 flex justify-between text-sm font-semibold\" v-if=\"adminMode\"><button v-on:click=\"$emit('save-image-orientation',uid)\" class=\"text-red-600 italic\">Save orientation...</button><span v-if=\"selectedImage && selectedImage.id==uid\" class=\"text-blue-700\">Active</span></div>\r\n      </div>\r\n    </div>\r\n  </portal>\r\n</template>\r\n\r\n<script>\r\nimport {Portal} from '@linusborg/vue-simple-portal'\r\n\r\nexport default {\r\n  name: \"GalleryItemsPlayer\",\r\n  components: {\r\n    Portal\r\n  },\r\n  data() {\r\n    return {}\r\n  },\r\n  props: ['galleryItemsConfig', 'viewer', 'images', 'selectedImage','adminMode'],\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItemsPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItemsPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GalleryItemsPlayer.vue?vue&type=template&id=a761fe44&scoped=true&\"\nimport script from \"./GalleryItemsPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./GalleryItemsPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a761fe44\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"selected-image-container\"},[_c('img',{staticClass:\"centered-fixed\",style:({'opacity':_vm.opacity, 'max-height':_vm.imgHeight + 'px'}),attrs:{\"src\":_vm.selectedImage.url,\"width\":\"auto\"}}),_c('div',{staticClass:\"controls\"},[_c('Slider',{staticStyle:{\"width\":\"200px\"},attrs:{\"min\":0.1,\"max\":1,\"step\":-1},model:{value:(_vm.opacity),callback:function ($$v) {_vm.opacity=$$v},expression:\"opacity\"}}),_c('button',{staticClass:\"close-img-button text-gray-900 bg-white rounded-sm px-2 py-1 font-normal text-normal\",on:{\"click\":function($event){return _vm.$emit('image-closed')}}},[_vm._v(\"close \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"selected-image-container\">\r\n      <img v-bind:src=\"selectedImage.url\" width=\"auto\"  class=\"centered-fixed\" v-bind:style=\"{'opacity':opacity, 'max-height':imgHeight + 'px'}\"/>\r\n      <div class=\"controls\">\r\n        <Slider v-model=\"opacity\" v-bind:min=\"0.1\" v-bind:max=\"1\" v-bind:step=\"-1\" style=\"width:200px\" />\r\n        <button class=\"close-img-button text-gray-900 bg-white rounded-sm px-2 py-1 font-normal text-normal\" v-on:click=\"$emit('image-closed')\">close\r\n        </button>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nimport Slider from '@vueform/slider/dist/slider.vue2.js'\r\nexport default {\r\n  name: \"GalleryItemViewer\",\r\n  components:{\r\n    Slider\r\n  },\r\n  data() {\r\n    return {\r\n      opacity: 0.5,\r\n    }\r\n  },\r\n  props: ['selectedImage', 'selectedImageConf','viewer'],\r\n  computed:{\r\n    imgHeight:function(){\r\n      const originalBrowserHeightOnSave = this.selectedImageConf?.browserHeight || 0;\r\n      const currentBrowserHeight = document.documentElement.clientHeight;\r\n      const originalBroweserHeight = originalBrowserHeightOnSave || currentBrowserHeight;\r\n      console.log('originalBrowserHeightOnSave',originalBrowserHeightOnSave,'currentBrowserHeight',currentBrowserHeight, 'imgHeight', this.selectedImage.height, 'originalBroweserHeight',originalBroweserHeight);\r\n      const imgHeight = this.selectedImage.height * currentBrowserHeight / originalBroweserHeight;\r\n      console.log(\"Calculated Image height:\", imgHeight);\r\n      return imgHeight;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.selected-image-container{\r\n  overflow:hidden;\r\n}\r\n.selected-image-container img {\r\n  max-width: 10000px;\r\n}\r\n.controls{\r\n  z-index: 100;\r\n  position: fixed;\r\n  top: 0;\r\n  left:0;\r\n  right:0;\r\n  padding-top:5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  justify-content: center;\r\n}\r\n.centered-fixed{\r\n  z-index: 50;\r\n  position: fixed;\r\n  top:50%;\r\n  left:50%;\r\n  transform: translate(-50%, -50%);\r\n  pointer-events: none;\r\n}\r\n</style>\r\n<style src=\"@vueform/slider/themes/default.css\"></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItemViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItemViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GalleryItemViewer.vue?vue&type=template&id=9ad89464&scoped=true&\"\nimport script from \"./GalleryItemViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./GalleryItemViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GalleryItemViewer.vue?vue&type=style&index=0&id=9ad89464&scoped=true&lang=css&\"\nimport style1 from \"@vueform/slider/themes/default.css?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9ad89464\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticClass:\"text-sm block mb-2\"},[_vm._v(\"ðŸ’¥ Explode scene \")]),_c('Slider',{attrs:{\"tooltips\":false},on:{\"update\":function($event){return _vm.$emit('explosion-step-changed', _vm.explosionStepInternal);}},model:{value:(_vm.explosionStepInternal),callback:function ($$v) {_vm.explosionStepInternal=$$v},expression:\"explosionStepInternal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <span class=\"text-sm block mb-2\">ðŸ’¥ Explode scene </span>\r\n    <Slider v-model=\"explosionStepInternal\" v-bind:tooltips=\"false\" v-on:update=\"$emit('explosion-step-changed', explosionStepInternal);\"></Slider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Slider from '@vueform/slider/dist/slider.vue2.js'\r\n\r\nexport default {\r\n  name: \"ExplosionPlayer.vue\",\r\n  components: {\r\n    Slider\r\n  },\r\n  data() {\r\n    return {\r\n      explosionScaleStepDefault: 10,\r\n      explosionMoveStepDefault: 10,\r\n      explosionStepInternal:0,\r\n    }\r\n  },\r\n  props: ['explosionSettings', 'ptPotreeReferences', 'explosionCurrentStep'],\r\n  watch: {\r\n    explosionCurrentStep: function () {\r\n      this.explosionStepInternal = this.explosionCurrentStep;\r\n      const step = this.explosionCurrentStep;\r\n      const moveStep = this.explosionSettings?.explosionMoveStep ? this.explosionSettings.explosionMoveStep / 100 : this.explosionMoveStepDefault / 100;\r\n      const scaleStep = this.explosionSettings?.explosionScaleStep ? this.explosionSettings.explosionScaleStep / 100 : this.explosionScaleStepDefault / 100;\r\n      console.log(\"Trying to explode with step\", step, \" moveStep\", moveStep, \" scaleStep\", scaleStep);\r\n      Object.entries(this.explosionSettings.ptModels).forEach(([ptId, item]) => {\r\n        const pt = this.ptPotreeReferences[ptId];\r\n        const opt = item.direction;\r\n        const initPos = item.initialPos;\r\n        const modifier = step * moveStep;\r\n        if (opt === 'scale') {\r\n          const scaleSize = 1 + (step * scaleStep);\r\n          pt.scale.set(scaleSize, scaleSize, scaleSize);\r\n        }\r\n        if (opt === 'right') {\r\n          pt.position.x = initPos.x - modifier;\r\n        }\r\n        if (opt === 'left') {\r\n          pt.position.x = initPos.x + modifier;\r\n        }\r\n        if (opt === 'front') {\r\n          pt.position.y = initPos.y - modifier;\r\n        }\r\n        if (opt === 'back') {\r\n          pt.position.y = initPos.y + modifier;\r\n        }\r\n        if (opt === 'up') {\r\n          pt.position.z = initPos.z - modifier;\r\n        }\r\n        if (opt === 'down') {\r\n          pt.position.z = initPos.z + modifier;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n<style src=\"@vueform/slider/themes/default.css\"></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplosionPlayer.vue?vue&type=template&id=00fe193d&scoped=true&\"\nimport script from \"./ExplosionPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplosionPlayer.vue?vue&type=script&lang=js&\"\nimport style1 from \"@vueform/slider/themes/default.css?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00fe193d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticClass:\"text-xs block mt-4\"},[_vm._v(\"Movement speed:\")]),_c('div',[_c('Slider',{model:{value:(_vm.explosionSettings.explosionMoveStep),callback:function ($$v) {_vm.$set(_vm.explosionSettings, \"explosionMoveStep\", $$v)},expression:\"explosionSettings.explosionMoveStep\"}})],1),_c('span',{staticClass:\"text-xs block mt-4\"},[_vm._v(\"Movement:\")]),_vm._l((_vm.explosionSettings.ptModels),function(item,ptId){return _c('div',{key:'explode-'+ptId},[_c('ExplosionOptionItem',{attrs:{\"item\":item,\"pt-id\":ptId}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-2 flex flex-col items-stretch\"},[_c('span',[_vm._v(_vm._s(_vm.item.title)+\":\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.item.direction),expression:\"item.direction\"}],staticClass:\"h-8 text-gray-900\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.item, \"direction\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"Please select\")]),_c('option',{attrs:{\"value\":\"left\"}},[_vm._v(\"left (-x)\")]),_c('option',{attrs:{\"value\":\"right\"}},[_vm._v(\"right (+x)\")]),_c('option',{attrs:{\"value\":\"back\"}},[_vm._v(\"back (-y)\")]),_c('option',{attrs:{\"value\":\"front\"}},[_vm._v(\"front (+y)\")]),_c('option',{attrs:{\"value\":\"down\"}},[_vm._v(\"down (-z)\")]),_c('option',{attrs:{\"value\":\"up\"}},[_vm._v(\"up (+z)\")]),_c('option',{attrs:{\"value\":\"dontmove\"}},[_vm._v(\"do nothing\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mt-2 flex flex-col items-stretch\">\r\n    <span>{{ item.title }}:</span>\r\n    <select v-model=\"item.direction\" class=\"h-8 text-gray-900\">\r\n      <option disabled value=\"\">Please select</option>\r\n      <option value=\"left\">left (-x)</option>\r\n      <option value=\"right\">right (+x)</option>\r\n      <option value=\"back\">back (-y)</option>\r\n      <option value=\"front\">front (+y)</option>\r\n      <option value=\"down\">down (-z)</option>\r\n      <option value=\"up\">up (+z)</option>\r\n      <option value='dontmove'>do nothing</option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ExplosionOptionItem\",\r\n  props: ['ptId','item'],\r\n  data() {\r\n    return {}\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionOptionItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionOptionItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplosionOptionItem.vue?vue&type=template&id=702cca04&scoped=true&\"\nimport script from \"./ExplosionOptionItem.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplosionOptionItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"702cca04\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <span class=\"text-xs block mt-4\">Movement speed:</span>\r\n    <div>\r\n      <Slider v-model=\"explosionSettings.explosionMoveStep\"/>\r\n    </div>\r\n    <span class=\"text-xs block mt-4\">Movement:</span>\r\n    <div v-for=\"(item, ptId) in explosionSettings.ptModels\" v-bind:key=\"'explode-'+ptId\">\r\n      <ExplosionOptionItem v-bind:item=\"item\" v-bind:pt-id=\"ptId\"></ExplosionOptionItem>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Slider from '@vueform/slider/dist/slider.vue2.js'\r\nimport ExplosionOptionItem from './ExplosionOptionItem.vue'\r\n\r\nexport default {\r\n  name: \"ExplosionConfigurator.vue\",\r\n  components: {\r\n    Slider,\r\n    ExplosionOptionItem\r\n  },\r\n  props: ['explosionSettings'],\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n<style src=\"@vueform/slider/themes/default.css\"></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionConfigurator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplosionConfigurator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplosionConfigurator.vue?vue&type=template&id=36734707&scoped=true&\"\nimport script from \"./ExplosionConfigurator.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplosionConfigurator.vue?vue&type=script&lang=js&\"\nimport style1 from \"@vueform/slider/themes/default.css?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36734707\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showConfig)?_c('div',[_c('portal',{attrs:{\"selector\":\"#cyi-tools-depictions-config\"}},_vm._l((_vm.vectors),function(item,udId){return _c('div',{key:'underDepict-'+udId,staticClass:\"bg-gray-100 rounded-xl text-gray-900 px-1\"},[_c('UndergroundDepictionConfigItem',{attrs:{\"init-p1\":item.p1,\"init-p2\":item.p2,\"init-p3\":item.p3,\"init-p4\":item.p4,\"init-z\":item.z,\"init-rot\":item.rot,\"init-anchor-point\":item.anchorPoint,\"item\":_vm.depictions[udId],\"ud-id\":udId},on:{\"item-config-updated\":_vm.updateMesh}})],1)}),0)],1):_vm._e(),(_vm.showGallery)?_c('div',{staticClass:\"mt-2\"},_vm._l((_vm.depictions),function(item,udId){return _c('div',{key:'depictGalleryItem-'+udId,staticClass:\"px-2 py-1\"},[(_vm.meshes[udId])?_c('div',{staticClass:\"flex\"},[_c('Toggle',{model:{value:(_vm.meshes[udId].visible),callback:function ($$v) {_vm.$set(_vm.meshes[udId], \"visible\", $$v)},expression:\"meshes[udId].visible\"}}),_c('span',{staticClass:\"block ml-2 text-xs mt-2 text-center\"},[_vm._v(_vm._s(item.title))])],1):_vm._e()])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-2 flex flex-col max-w-100 text-xs\"},[_c('span',{staticClass:\"block font-semibold text-sm text-center\"},[_vm._v(_vm._s(_vm.item.title))]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_c('div',[_c('span',[_vm._v(\"x1: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p1.x),expression:\"p1.x\"}],domProps:{\"value\":(_vm.p1.x)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p1, \"x\", $event.target.value)}}})]),_c('div',[_c('span',[_vm._v(\"y1: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p1.y),expression:\"p1.y\"}],domProps:{\"value\":(_vm.p1.y)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p1, \"y\", $event.target.value)}}})])]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_c('div',[_c('span',[_vm._v(\"x2: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p2.x),expression:\"p2.x\"}],domProps:{\"value\":(_vm.p2.x)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p2, \"x\", $event.target.value)}}})]),_c('div',[_c('span',[_vm._v(\"y2: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p2.y),expression:\"p2.y\"}],domProps:{\"value\":(_vm.p2.y)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p2, \"y\", $event.target.value)}}})])]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_c('div',[_c('span',[_vm._v(\"x3: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p3.x),expression:\"p3.x\"}],domProps:{\"value\":(_vm.p3.x)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p3, \"x\", $event.target.value)}}})]),_c('div',[_c('span',[_vm._v(\"y3: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p3.y),expression:\"p3.y\"}],domProps:{\"value\":(_vm.p3.y)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p3, \"y\", $event.target.value)}}})])]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_c('div',[_c('span',[_vm._v(\"x4: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p4.x),expression:\"p4.x\"}],domProps:{\"value\":(_vm.p4.x)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p4, \"x\", $event.target.value)}}})]),_c('div',[_c('span',[_vm._v(\"y4: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.p4.y),expression:\"p4.y\"}],domProps:{\"value\":(_vm.p4.y)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.p4, \"y\", $event.target.value)}}})])]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_c('div',[_c('span',[_vm._v(\"z: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.z),expression:\"z\"}],domProps:{\"value\":(_vm.z)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.z=$event.target.value}}})]),_c('div',[_c('span',[_vm._v(\"Rot(deg) \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rot),expression:\"rot\"}],domProps:{\"value\":(_vm.rot)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.rot=$event.target.value}}})])]),_c('div',{staticClass:\"flex flex-col mb-2\"},[_vm._m(0),_c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.anchorPoint),expression:\"anchorPoint\"}],staticClass:\"h-6 w-24\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.anchorPoint=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"P1\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"P2\")]),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"P3\")]),_c('option',{attrs:{\"value\":\"4\"}},[_vm._v(\"P4\")])])])]),_c('button',{on:{\"click\":_vm.saveValues}},[_vm._v(\"Update\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',[_vm._v(\"Anchor Point\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mt-2 flex flex-col max-w-100 text-xs\">\r\n    <span class=\"block font-semibold text-sm text-center\">{{ item.title }}</span>\r\n    <div class=\"flex flex-col mb-2\">\r\n      <div><span>x1: </span><input v-model=\"p1.x\" class=\"\"/></div>\r\n      <div><span>y1: </span><input v-model=\"p1.y\" class=\"\"/></div>\r\n    </div>\r\n    <div class=\"flex flex-col mb-2\">\r\n      <div><span>x2: </span><input v-model=\"p2.x\" class=\"\"/></div>\r\n      <div><span>y2: </span><input v-model=\"p2.y\" class=\"\"/></div>\r\n    </div>\r\n    <div class=\"flex flex-col mb-2\">\r\n      <div><span>x3: </span><input v-model=\"p3.x\" class=\"\"/></div>\r\n      <div><span>y3: </span><input v-model=\"p3.y\" class=\"\"/></div>\r\n    </div>\r\n    <div class=\"flex flex-col mb-2\">\r\n      <div><span>x4: </span><input v-model=\"p4.x\" class=\"\" /></div>\r\n      <div><span>y4: </span><input v-model=\"p4.y\" class=\"\" /></div>\r\n    </div>\r\n    <div class=\"flex flex-col mb-2\">\r\n      <div><span>z: </span><input v-model=\"z\" /></div>\r\n      <div><span>Rot(deg) </span><input v-model=\"rot\" /></div>\r\n    </div>\r\n    <div class=\"flex flex-col mb-2\">\r\n        <div><span>Anchor Point</span></div>\r\n        <div>\r\n          <select v-model=\"anchorPoint\" class=\"h-6 w-24\">\r\n            <option value=\"1\">P1</option>\r\n            <option value=\"2\">P2</option>\r\n            <option value=\"3\">P3</option>\r\n            <option value=\"4\">P4</option>\r\n          </select>\r\n      </div>\r\n    </div>\r\n\r\n    <button v-on:click=\"saveValues\">Update</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UndergroundDepictionConfigItem\",\r\n  props: ['udId', 'item', 'initP1', 'initP2', 'initP3', 'initP4', 'initZ', 'initRot', 'initAnchorPoint'],\r\n  data() {\r\n    return {\r\n      p1: this.initP1.clone(),\r\n      p2: this.initP2.clone(),\r\n      p3: this.initP3.clone(),\r\n      p4: this.initP4.clone(),\r\n      z: this.initZ,\r\n      rot: this.initRot,\r\n      anchorPoint : this.initAnchorPoint ? this.initAnchorPoint.toString() : \"1\"\r\n    }\r\n  },\r\n  methods: {\r\n    saveValues() {\r\n      console.log(\"Saving values...\");\r\n      const values = {\r\n        x1: parseFloat(this.p1.x),\r\n        y1: parseFloat(this.p1.y),\r\n        x2: parseFloat(this.p2.x),\r\n        y2: parseFloat(this.p2.y),\r\n        x3: parseFloat(this.p3.x),\r\n        y3: parseFloat(this.p3.y),\r\n        x4: parseFloat(this.p4.x),\r\n        y4: parseFloat(this.p4.y),\r\n        z: parseFloat(this.z),\r\n        rot: parseInt(this.rot),\r\n        anchorPoint: parseInt(this.anchorPoint)\r\n      }\r\n      this.$emit('item-config-updated', this.udId, values);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UndergroundDepictionConfigItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UndergroundDepictionConfigItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UndergroundDepictionConfigItem.vue?vue&type=template&id=83f41ee2&scoped=true&\"\nimport script from \"./UndergroundDepictionConfigItem.vue?vue&type=script&lang=js&\"\nexport * from \"./UndergroundDepictionConfigItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"83f41ee2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <div v-if=\"showConfig\">\r\n      <portal selector=\"#cyi-tools-depictions-config\">\r\n        <div v-for=\"(item, udId) in vectors\" v-bind:key=\"'underDepict-'+udId\"\r\n             class=\"bg-gray-100 rounded-xl text-gray-900 px-1\">\r\n          <UndergroundDepictionConfigItem\r\n              v-on:item-config-updated=\"updateMesh\"\r\n              v-bind:init-p1=\"item.p1\"\r\n              v-bind:init-p2=\"item.p2\"\r\n              v-bind:init-p3=\"item.p3\"\r\n              v-bind:init-p4=\"item.p4\"\r\n              v-bind:init-z=\"item.z\"\r\n              v-bind:init-rot=\"item.rot\"\r\n              v-bind:init-anchor-point=\"item.anchorPoint\"\r\n              v-bind:item=\"depictions[udId]\"\r\n              v-bind:ud-id=\"udId\"\r\n          ></UndergroundDepictionConfigItem>\r\n        </div>\r\n      </portal>\r\n    </div>\r\n    <div v-if=\"showGallery\" class=\"mt-2\">\r\n      <div v-for=\"(item, udId) in depictions\" v-bind:key=\"'depictGalleryItem-'+udId\"\r\n           class=\"px-2 py-1\">\r\n        <div v-if=\"meshes[udId]\" class=\"flex\">\r\n          <Toggle v-model=\"meshes[udId].visible\"></Toggle>\r\n          <span class=\"block ml-2 text-xs mt-2 text-center\">{{ item.title }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UndergroundDepictionConfigItem from \"./UndergroundDepictionConfigItem.vue\";\r\nimport * as THREE from \"three\";\r\nimport {Portal} from '@linusborg/vue-simple-portal'\r\nimport Toggle from '@vueform/toggle/dist/toggle.vue2.js'\r\n\r\nexport default {\r\n  name: \"UndergroundDepictionsConfigurator\",\r\n  components: {\r\n    UndergroundDepictionConfigItem,\r\n    Portal,\r\n    Toggle\r\n  },\r\n  props: ['settings', 'depictions', 'viewer', 'showConfig', 'showGallery'],\r\n  data() {\r\n    return {\r\n      meshes: {},\r\n      vectors: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.createVectors();\r\n    this.createMeshes();\r\n  },\r\n  methods: {\r\n    createVectors() {\r\n      let vectors = {}\r\n      Object.entries(this.depictions).forEach(([udId]) => {\r\n        const vals = this.settings[udId] || {x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0, x4: 0, y4: 0, z: 0, rot: 0};\r\n        const p1 = new THREE.Vector2(vals.x1, vals.y1);\r\n        const p2 = new THREE.Vector2(vals.x2, vals.y2);\r\n        const p3 = new THREE.Vector2(vals.x3, vals.y3);\r\n        const p4 = new THREE.Vector2(vals.x4, vals.y4);\r\n        const z = vals.z;\r\n        const rot = vals.rot;\r\n        vectors[udId] = {\r\n          p1,\r\n          p2,\r\n          p3,\r\n          p4,\r\n          z,\r\n          rot,\r\n        }\r\n      });\r\n      this.vectors = vectors;\r\n    },\r\n    rerenderMesh(mesh, width, height, angle, rot, z, centerX, centerY) {\r\n      //map.center = new THREE.Vector2(centerX, centerY);\r\n      mesh.position.set(centerX, centerY, z);\r\n      mesh.rotateZ(angle + (rot * 3.14 / 180))\r\n      mesh.width = width;\r\n      mesh.heigh = height;\r\n      mesh.position.set(centerX, centerY, z);\r\n      //mesh.rotation.x = 3.14;\r\n      //mesh.rotation.y = 3.14;\r\n    },\r\n    calcWidthHeight(t1, t2, t3) {\r\n      const width = (t2.distanceTo(t1));\r\n      const height = (t3.distanceTo(t2));\r\n      const centerX = t2.x - (t2.x - t1.x)/2 - (t2.x - t3.x)/2;\r\n      const centerY = t2.y - (t2.y-t1.y)/2 - (t2.y - t3.y)/2;\r\n      const angle = Math.atan2(t2.y - t1.y, t2.x - t1.x);\r\n      return {width, height, centerX, centerY, angle}\r\n    },\r\n    getSelectedPoints(p1,p2,p3,p4, anchorPoint){\r\n      let selectedPoints;\r\n      switch (anchorPoint) {\r\n        case 1:\r\n          selectedPoints = [p1,p2,p3];\r\n          break;\r\n        case 2:\r\n          selectedPoints = [p2,p3,p4];\r\n          break;\r\n        case 3:\r\n          selectedPoints = [p3,p4, p1];\r\n          break;\r\n        case 4:\r\n          selectedPoints = [p4, p1,p2];\r\n          break;\r\n        default:\r\n          selectedPoints = [p1,p2,p3];\r\n      }\r\n      const [t1,t2,t3]= selectedPoints;\r\n      return [t1,t2,t3];\r\n    },\r\n    createMeshes() {\r\n      Object.entries(this.depictions).forEach(([udId, item]) => {\r\n        if (!this.settings[udId]) {\r\n          return;\r\n        }\r\n        //const centerX = (p1.x + p2.x + p3.x3 + p4.x4) / 4;\r\n        //const centerY = (vals.y1 + vals.y2 + vals.y3 + vals.y4) / 4;\r\n        let {p1, p2, p3, p4} = this.vectors[udId];\r\n        const {z, rot} = this.settings[udId];\r\n        const startingPoint = 1;\r\n\r\n        const [t1,t2,t3]= this.getSelectedPoints(p1,p2,p3,p4, startingPoint);\r\n\r\n        const {width, height, centerX, centerY, angle} = this.calcWidthHeight(t1, t2, t3);\r\n\r\n        const geometry = new THREE.PlaneGeometry( width, height );\r\n        const map = new THREE.TextureLoader().load(item.url);\r\n        const material = new THREE.MeshBasicMaterial({map: map, opacity: 0.9, transparent: true, side: THREE.FrontSide});\r\n        const mesh = new THREE.Mesh(geometry, material);\r\n\r\n        mesh.visible = false;\r\n        this.viewer.scene.scene.add(mesh);\r\n        this.rerenderMesh(mesh, width, height, angle, rot, z, centerX, centerY);\r\n        this.meshes[udId] = mesh;\r\n\r\n        // Render dots for each image for debugging\r\n        // const dots = this.renderDots([p1,p2,p3,p4], z);\r\n        // dots.forEach((dot)=>{\r\n        //   this.viewer.scene.scene.add( dot );\r\n        // })\r\n\r\n      })\r\n    },\r\n    renderDots(pointsArr){\r\n      const dots = [];\r\n      pointsArr.forEach((dot)=>{\r\n        var dotGeometry = new THREE.BufferGeometry();\r\n        console.log(\"calculating dot to display\", dot.toArray());\r\n        dotGeometry.setAttribute( 'position', new THREE.Float32BufferAttribute( [...dot.toArray()], 3 ) );\r\n        dotGeometry.setAttribute( 'size', new THREE.Float32BufferAttribute( [1,1,1], 1 ) );\r\n        var dotMaterial = new THREE.PointsMaterial( { size: 0.1 } );\r\n        var meshDot = new THREE.Points( dotGeometry, dotMaterial );\r\n        dots.push(meshDot);\r\n      })\r\n      return dots\r\n    },\r\n    updateMesh(udId, vals) {\r\n      const p1 = new THREE.Vector2(vals.x1, vals.y1);\r\n      const p2 = new THREE.Vector2(vals.x2, vals.y2);\r\n      const p3 = new THREE.Vector2(vals.x3, vals.y3);\r\n      const p4 = new THREE.Vector2(vals.x4, vals.y4);\r\n      const {z, rot, anchorPoint} = vals;\r\n      const ap = anchorPoint || 1;\r\n      this.vectors[udId] = {\r\n        p1,\r\n        p2,\r\n        p3,\r\n        p4,\r\n        z,\r\n        rot,\r\n        anchorPoint: ap\r\n      };\r\n      this.settings[udId] = {\r\n        x1: p1.x,\r\n        y1: p1.y,\r\n        x2: p2.x,\r\n        y2: p2.y,\r\n        x3: p3.x,\r\n        y3: p3.y,\r\n        x4: p4.x,\r\n        y4: p4.y,\r\n        z,\r\n        rot,\r\n        anchorPoint: ap\r\n      }\r\n      console.log(\"Refreshing with anchor point\", ap);\r\n      const [t1,t2,t3]= this.getSelectedPoints(p1,p2,p3,p4, ap);\r\n      console.log(\"[t1,t2,t3]\", [t1,t2,t3]);\r\n      const {width, height, centerX, centerY, angle} = this.calcWidthHeight(t1, t2, t3);\r\n      const mesh = this.meshes[udId];\r\n      this.$emit('on-save', 'depictions');\r\n      this.rerenderMesh(mesh, width, height, angle, rot, z, centerX, centerY);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n<style src=\"@vueform/toggle/themes/default.css\"></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UndergroundDepictionsConfigurator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UndergroundDepictionsConfigurator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UndergroundDepictionsConfigurator.vue?vue&type=template&id=643cd09c&scoped=true&\"\nimport script from \"./UndergroundDepictionsConfigurator.vue?vue&type=script&lang=js&\"\nexport * from \"./UndergroundDepictionsConfigurator.vue?vue&type=script&lang=js&\"\nimport style1 from \"@vueform/toggle/themes/default.css?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"643cd09c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\" class=\"\">\n    <div v-if=\"selectedImageUid\">\n      <portal selector=\"body\">\n        <GalleryItemViewer v-on:image-closed=\"closeGalleryImage\" v-bind:viewer=\"viewer\" v-bind:default-fov=\"defaultFOV\"\n                           v-bind:selected-image=\"images[selectedImageUid]\" v-bind:selected-image-conf=\"galleryItemsConfig[selectedImageUid]\"></GalleryItemViewer>\n        <div class=\"absolute bottom-0 py-2 text-white bg-gray-800 px-3\" style=\"z-index: 1000;\">FOV:{{viewer.getFOV()}}</div>\n      </portal>\n    </div>\n    <div>\n      <div v-if=\"explosionEnabled\" class=\"text-white mt-4\">\n        <ExplosionPlayer v-bind:explosion-current-step=\"explosionCurrentStep\" v-bind:explosion-settings=\"explosionSettings\"\n                         v-bind:pt-potree-references=\"ptPotreeReferences\"\n                        v-on:explosion-step-changed=\"setExplosionStep\"\n        ></ExplosionPlayer>\n      </div>\n      <div class=\"mt-4 flex\" v-if=\"galleryEnabled\">\n        <!-- Enabled: \"bg-indigo-600\", Not Enabled: \"bg-gray-200\" -->\n        <Toggle v-model=\"galleryOpen\" :classes=\"{\n                        toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                        toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                    }\"></Toggle>\n        <span class=\"text-sm font-medium pl-4 block\" v-if=\"galleryOpen\">Hide Gallery</span>\n        <span class=\"text-sm font-medium pl-4 block\" v-if=\"!galleryOpen\">Show Gallery</span>\n      </div>\n      <div v-if=\"images && galleryOpen\">\n        <GalleryItemsPlayer\n            v-on:save-image-orientation=\"saveOrientationOnSelectedImage\"\n            v-on:image-selected=\"selectGalleryImage\"\n            v-bind:selected-image=\"images[selectedImageUid]\"\n            v-bind:images=\"images\"\n            v-bind:gallery-items-config=\"galleryItemsConfig\"\n            v-bind:viewer=\"viewer\"\n            v-bind:admin-mode=\"adminMode\"\n        >\n        </GalleryItemsPlayer>\n      </div>\n      <div class=\"flex mt-4\" v-if=\"depictionsEnabled\">\n        <!-- Enabled: \"bg-indigo-600\", Not Enabled: \"bg-gray-200\" -->\n        <Toggle v-model=\"depictionsOpen\" :classes=\"{\n                        toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                        toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                    }\"></Toggle>\n        <span class=\"text-sm font-medium pl-4 block\" v-if=\"depictionsOpen\">GPR Meshes</span>\n        <span class=\"text-sm font-medium pl-4 block\" v-if=\"!depictionsOpen\">GPR Meshes</span>\n      </div>\n      <div v-if=\"depictionsEnabled\">\n        <UndergroundDepictionsConfigurator\n            v-bind:depictions=\"undergroundDepictions\"\n            v-bind:settings=\"undergroundDepictionsSettings\"\n            v-bind:viewer=\"viewer\"\n            v-bind:show-config=\"adminMode\"\n            v-bind:show-gallery=\"depictionsOpen\"\n            v-on:on-save=\"saveToServer\"\n        ></UndergroundDepictionsConfigurator>\n      </div>\n      <div class=\"flex mt-4\">\n        <!-- Enabled: \"bg-indigo-600\", Not Enabled: \"bg-gray-200\" -->\n        <button type=\"button\" v-on:click=\"toggleFullScreen\"\n                v-bind:class=\"[ isFullscreen ? 'bg-indigo-600' : 'bg-gray-200' ]\"\n                class=\"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                aria-pressed=\"false\">\n          <span class=\"sr-only\">Use setting</span>\n          <!-- Enabled: \"translate-x-5\", Not Enabled: \"translate-x-0\" -->\n          <span aria-hidden=\"true\"\n                v-bind:class=\"[ isFullscreen ? 'translate-x-5' : 'translate-x-0' ]\"\n                class=\"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200\"></span>\n        </button>\n        <span class=\"text-sm font-medium pl-4\" v-if=\"isFullscreen\">Close Fullscreen</span>\n        <span class=\"text-sm font-medium pl-4\" v-if=\"!isFullscreen\">Go Fullscreen</span>\n      </div>\n      <!--      <div class=\"text-white\">-->\n      <!--        <button type=\"button\" v-on:click=\"toggleFullScreen\"-->\n      <!--                class=\"relative inline-flex items-center px-4 py-2 rounded-md border border-gray-300 bg-white text-md font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\">-->\n      <!--          ðŸ”› Toggle Fullscreen-->\n      <!--        </button>-->\n      <!--      </div>-->\n\n      <div class=\"py-2 mt-6 text-white\" v-if=\"adminMode\">\n        <div class=\"flex justify-between\">\n          <span class=\"font-semibold\">Admin config</span>\n          <div class=\"relative z-0 inline-flex shadow-sm rounded-md flex flex-wrap\">\n            <button type=\"button\" v-on:click=\"saveInitialStateConfig\"\n                    class=\"-ml-px relative inline-flex items-center p-1 mr-2 rounded-md border border-gray-300 bg-white text-md font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\">\n              ðŸ’¾\n            </button>\n            <button type=\"button\" v-on:click=\"loadInitialStateConfig\"\n                    class=\"-ml-px relative inline-flex items-center p-1 rounded-md border border-gray-300 bg-white text-md font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\">\n              ðŸ”\n            </button>\n          </div>\n        </div>\n        <hr class=\"border-2 border-white mt-4 mb-4\"/>\n\n        <div class=\"flex mt-2\">\n          <!-- Enabled: \"bg-indigo-600\", Not Enabled: \"bg-gray-200\" -->\n          <Toggle v-model=\"explosionEnabled\" :classes=\"{\n                        toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                        toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                    }\"></Toggle>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"explosionEnabled\">Explosion Enabled</span>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"!explosionEnabled\">Explosion Disabled</span>\n        </div>\n        <div v-if=\"explosionEnabled\">\n          <div class=\"mt-2 flex flex-col justify-stretch\">\n            <ExplosionConfigurator v-bind:explosion-settings=\"explosionSettings\"></ExplosionConfigurator>\n          </div>\n        </div>\n\n        <hr class=\"border border-blue-600 mt-4 mb-4\"/>\n\n        <div class=\"flex mt-4\">\n          <!-- Enabled: \"bg-indigo-600\", Not Enabled: \"bg-gray-200\" -->\n          <Toggle v-model=\"galleryEnabled\" :classes=\"{\n                        toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                        toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                    }\"></Toggle>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"galleryEnabled\">Gallery Enabled</span>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"!galleryEnabled\">Gallery Disabled</span>\n        </div>\n        <div id=\"cyi-tools-gallery-config\"></div>\n        <hr class=\"border border-blue-600 mt-4 mb-4\"/>\n\n        <div class=\"flex mt-2\">\n          <Toggle v-model=\"depictionsEnabled\" :classes=\"{\n                        toggleOn: 'bg-indigo-600 border-indigo-500 justify-start text-white',\n                        toggleOff: 'bg-gray-200 border-gray-200 justify-end text-gray-700'\n                    }\"></Toggle>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"depictionsEnabled\">GPR Enabled</span>\n          <span class=\"text-sm font-medium pl-4\" v-if=\"!depictionsEnabled\">GPR Disabled</span>\n        </div>\n        <div id=\"cyi-tools-depictions-config\"></div>\n      </div>\n    </div>\n\n    <portal selector=\"#cyi-tools-sidebar\">\n      <div id=\"cyi-tools-sidebar-content\"\n           v-bind:class=\"[sidebarOpen ? 'w-56' : 'w-0', 'fixed top-0 bottom-0 right-0 bg-gray-800 flex flex-col text-white overflow-auto']\" style=\"z-index: 100\">\n\n      </div>\n    </portal>\n\n  </div>\n</template>\n\n<script>\nimport * as THREE from 'three'\nimport {Portal} from '@linusborg/vue-simple-portal'\n\nwindow.THREE = THREE;\n\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nconst csrftoken = getCookie('csrftoken');\nconst visConfig = JSON.parse(document.getElementById('visConfig').textContent); //Gets pointcloud json config generated from django template tag above\nimport GalleryItemsPlayer from './components/GalleryItemsPlayer.vue';\nimport GalleryItemViewer from './components/GalleryItemViewer.vue';\nimport ExplosionPlayer from './components/ExplosionPlayer.vue';\nimport ExplosionConfigurator from './components/ExplosionConfigurator.vue';\nimport UndergroundDepictionsConfigurator from \"./components/UndergroundDepictionsConfigurator.vue\";\n\nimport Toggle from '@vueform/toggle/dist/toggle.vue2.js'\n\nexport default {\n  name: 'App',\n  components: {\n    UndergroundDepictionsConfigurator,\n    ExplosionConfigurator,\n    ExplosionPlayer,\n    GalleryItemsPlayer,\n    GalleryItemViewer,\n    Portal,\n    Toggle\n  },\n  data() {\n    return {\n      //General config elements\n      viewer: window.viewer,\n      scene: null,\n      visConfig: visConfig,\n      potreeProjectConfig: null,\n      orbitControls: window.viewer.orbitControls,\n      // CYI Tools Viewer settings\n      defaultFOV: 60,\n      galleryOpen: false,\n      depictionsOpen: false,\n      adminMode: window.adminMode,\n      //Admin Tools\n\n      explosionEnabled: false,\n      galleryEnabled: false,\n      depictionsEnabled: false,\n      annotationWaitingClick: false,\n      explosionSettings: {\n        explosionMoveStep: 10,\n      },\n      explosionCurrentStep: 0,\n      images: {},\n      galleryItemsConfig: {},\n      selectedImageUid: null,\n      ptPotreeReferences: {},\n      undergroundDepictionsSettings: {}\n    }\n  },\n  watch: {\n    galleryOpen: function (val) {\n      if(val){\n        this.defaultFOV = this.viewer.getFOV();\n      }\n    },\n  },\n  computed: {\n    // a computed getter\n    sidebarOpen: function () {\n      // `this` points to the vm instance\n      return this.galleryOpen\n    },\n    isFullscreen: function () {\n      return window.fullScreen;\n    }\n  },\n  created: async function () {\n\n\n    await this.loadInitialStateConfig();\n    // for (const [ptId, ptConf] of Object.entries(visConfig.pointclouds)) {\n    //   window.Potree.loadPointCloud(ptConf.url, ptConf.title, function (e) {\n    //     let pointcloud = e.pointcloud;\n    //     _this.ptPotreeReferences[ptId] = pointcloud;\n    //     _this.viewer.scene.addPointCloud(pointcloud);\n    //     _this.viewer.fitToScreen();\n    //     _this.initializeExplosionIfNewModel(ptId);\n    //   });\n    // }\n\n    const axesHelper = new THREE.AxesHelper(5);\n    this.viewer.scene.scene.add(axesHelper); // Potree saves the THREEJs scene under a scene ref in the Potree scene\n    this.orbitControls = this.viewer.getControls();\n    window.addEventListener('keydown', this.keyDown);\n    //this.viewer.renderer.domElement.addEventListener('wheel', this.mouseWheel, {passive: true});\n    //this.viewer.renderer.domElement.addEventListener('DOMMouseScroll', this.mouseWheel, false);\n    window.app = this;\n    window.addEventListener(\"message\",this.parentMessage);\n  },\n  destroyed: function() {\n    window.removeEventListener(\"message\", this.parentMessage);\n  },\n  methods: {\n    /*\n    mouseWheel: function(e){\n      const fov = this.viewer.getFOV();\n      if (e.ctrlKey && e.shiftKey && this.selectedImageUid){\n        console.log('preventDefault')\n        e.preventDefault();\n        //Our cue to modify FOV\n        if(e.wheelDelta > 0 && fov < 100){\n          this.viewer.setFOV(fov + 1);\n          console.log(\"Setting fov at\", fov+1);\n        }else if(e.wheelDelta < 0 && fov > 1){\n          this.viewer.setFOV(fov - 1);\n        }\n\n      }\n\n    },\n    */\n    keyDown: function (e) {\n      const rot = 0.01;\n      const zom = 0.05\n      const mov = 0.001;\n      const fov = this.viewer.getFOV();\n      switch (e.code) {\n        case \"KeyS\":\n        case \"ArrowDown\":\n          // Handle \"back\"\n          //this.orbitControls.panDelta.x += l;\n          //this.orbitControls.panDelta.y += l;\n          this.orbitControls.pitchDelta += rot;\n          break;\n        case \"KeyW\":\n        case \"ArrowUp\":\n          // Handle \"forward\"\n          //this.orbitControls.panDelta.x -= l;\n          //this.orbitControls.panDelta.y -= l;\n          this.orbitControls.pitchDelta -= rot;\n          break;\n        case \"KeyA\":\n        case \"ArrowLeft\":\n          // Handle \"turn left\"\n          this.orbitControls.yawDelta -= rot;\n          //this.orbitControls.pitchDelta -= l;\n          break;\n        case \"KeyD\":\n        case \"ArrowRight\":\n          // Handle \"turn right\"\n          this.orbitControls.yawDelta += rot;\n          //this.orbitControls.pitchDelta += l;\n          break;\n        case \"KeyQ\":\n          this.orbitControls.panDelta.y += mov;\n          break;\n        case \"KeyE\":\n          this.orbitControls.panDelta.y -= mov;\n          break;\n        case \"KeyZ\":\n          this.orbitControls.panDelta.x -= mov;\n          break;\n        case \"KeyC\":\n          this.orbitControls.panDelta.x += mov;\n          break;\n        case \"KeyR\":\n          this.orbitControls.radiusDelta += zom;\n          break;\n        case \"KeyF\":\n          this.orbitControls.radiusDelta -= zom;\n          break;\n        case \"KeyT\":\n          if (fov < 100){\n            this.viewer.setFOV(fov + 1);\n          }\n          break;\n        case \"KeyG\":\n          if (fov > 1){\n            this.viewer.setFOV(fov - 1);\n          }\n          break;\n      }\n      //this.orbitControls.update(0.01);\n    },\n    toggleFullScreen: function () {\n      if (!document.fullscreenElement) {\n        document.documentElement.requestFullscreen();\n      } else {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        }\n      }\n    },\n    setExplosionStep: function(step){\n      this.explosionCurrentStep = step;\n    },\n    saveConfigOnServer: function () {\n      //Gather all important stuff to send on the server.\n      // The set of info we will send will be the visConfig\n      // that we shall get in the future\n      const dataToSave = {\n        \"potree\": this.potreeProjectConfig,\n        \"customFeatures\": {\n          \"explosionEnabled\": this.explosionEnabled,\n          \"galleryEnabled\": this.galleryEnabled,\n          \"depictionsEnabled\": this.depictionsEnabled,\n          \"explosionSettings\": this.explosionSettings,\n          \"galleryItemsSettings\": this.galleryItemsConfig,\n          \"undergroundDepictionsSettings\": this.undergroundDepictionsSettings,\n        }\n      }\n      const url = 'config-update';\n      const request = new Request(\n          url,\n          {headers: {'X-CSRFToken': csrftoken}}\n      );\n      fetch(request, {\n        method: 'POST',\n        body: JSON.stringify(dataToSave),\n        mode: 'same-origin'  // Do not send CSRF token to another domain.\n      }).then(function () {\n        console.log(\"Done saving on server\")\n      });\n\n    },\n    saveToServer() {\n      this.saveConfigOnServer();\n    },\n    saveInitialStateConfig: function () {\n      this.potreeProjectConfig = window.Potree.saveProject(this.viewer);\n      //Save on server\n      this.saveConfigOnServer();\n    },\n    loadInitialStateConfig: async function () {\n      this.images = this.visConfig?.images; //Copy image definitions from visConfig to app\n      this.undergroundDepictions = this.visConfig?.undergroundDepictions;\n      this.potreeProjectConfig = this.visConfig.jsConf?.potree;\n      this.customFeaturesConfig = this.visConfig.jsConf?.customFeatures;\n\n      const dataToInitialize = this.potreeProjectConfig;\n\n      let preLoadedModelIdx;\n      const preExistingModels = dataToInitialize?.pointclouds || [];\n      let newModelsToLoad = {};\n\n      // Create a lookup reference that can allow us to map pointcloud urls to their relevant db ID for everything else to function\n      // We will use this later in this method to get a reference to the actual ThreeJS Scene PointCloud\n      const modelsNameIdLookup = {};\n      for (const [ptId, ptConf] of Object.entries(this.visConfig.pointclouds)) {\n        modelsNameIdLookup[ptConf.title] = ptId;\n      }\n\n      // Now for models that had previous configuration in the Potree Project, find them using their url\n      // and update their name in case the user changed that in the admin panel\n      // Else, add the model in a pool to be added on the scene\n      for (const [ptId, ptConf] of Object.entries(this.visConfig.pointclouds)) {\n        preLoadedModelIdx = preExistingModels.findIndex((pt)=> pt.url == ptConf.url);\n        if (preLoadedModelIdx > -1){\n          preExistingModels[preLoadedModelIdx].name = ptConf.title //Update title if it was changed in admin\n        }else{\n          newModelsToLoad[ptId] = ptConf;\n        }\n      }\n\n      if (dataToInitialize){\n         //Overwrite previous config with the new one. This will also drop any Pointcloud that was removed from the admin panel\n         dataToInitialize.pointclouds = preExistingModels;\n         dataToInitialize.geopackages = []; //Not supported right now as they need to be loaded AFTER pointclouds have been loaded\n         await window.Potree.loadProject(this.viewer, dataToInitialize);\n      }\n\n      // Now lets add the new models that where never saved on the Potree project before\n      const ptCloudAddPromises = [];\n      let promise;\n      Object.values(newModelsToLoad).forEach(ptConf => {\n        promise = window.Potree.loadPointCloud(ptConf.url, '');\n        ptCloudAddPromises.push(promise);\n        promise.then(e =>{\n          e.pointcloud.name = ptConf.title;\n          this.viewer.scene.addPointCloud(e.pointcloud);\n        });\n      });\n      await Promise.all(ptCloudAddPromises);\n\n\n      // Now lets get the refs to the actual ThreeJS pointclouds and associate them with their ptId\n      // using modelsUrlptIdLookup\n      let ptId;\n      this.viewer.scene.pointclouds.forEach((pt)=>{\n        ptId = modelsNameIdLookup[pt.name];\n        this.ptPotreeReferences[ptId] = pt;\n        this.initializeExplosionIfNewModel(ptId);\n      })\n      this.viewer.fitToScreen();\n\n\n      this.galleryItemsConfig = this.customFeaturesConfig?.galleryItemsSettings || {};\n      this.explosionEnabled = this.customFeaturesConfig?.explosionEnabled || false;\n      this.galleryEnabled = this.customFeaturesConfig?.galleryEnabled || false;\n      this.depictionsEnabled = this.customFeaturesConfig?.depictionsEnabled || false;\n      if (this.customFeaturesConfig?.explosionSettings) {\n        this.explosionSettings = this.customFeaturesConfig?.explosionSettings\n      }\n      if (this.customFeaturesConfig?.undergroundDepictionsSettings) {\n        this.undergroundDepictionsSettings = this.customFeaturesConfig.undergroundDepictionsSettings\n      }\n    },\n    initializeExplosionIfNewModel: function (ptId) {\n      if (!this.explosionSettings.ptModels) {\n        this.explosionSettings.ptModels = {};\n      }\n      if (!this.explosionSettings.ptModels[ptId]) {\n        this.explosionSettings.ptModels[ptId] = {\n          title: this.visConfig.pointclouds[ptId].title,\n          direction: '',\n          ptId: ptId,\n          initialPos: this.ptPotreeReferences[ptId].position.clone()\n        }\n      }\n    },\n    addAnnotation: function () {\n      this.annotationWaitingClick = true;\n      let _this = this;\n      this.viewer.renderer.domElement.addEventListener('mousedown', () => {\n        _this.annotationWaitingClick = false;\n        // remove old annotations\n        //if (currentAnnotation !== null) {\n        //    scene.removeAnnotation(currentAnnotation);\n        // }\n\n        // find intersection\n        let mouse = this.viewer.inputHandler.mouse;\n        const camera = this.viewer.scene.getActiveCamera();\n\n        let hit = window.Potree.Utils.getMousePointCloudIntersection(mouse, camera, this.viewer, this.viewer.scene.pointclouds);\n\n        // add new annotation\n        if (hit !== null) {\n          this.viewer.scene.addAnnotation([\n            hit.location.x,\n            hit.location.y,\n            hit.location.z\n          ], {\n            \"title\": `(${hit.location.x},${hit.location.y},${hit.location.z})`,\n            \"actions\": []\n          });\n        }\n      }, {once: true});\n    },\n    csvToFloatList: function (param) {\n      let parts = param.split(',');\n      if (!parts.length) {\n        return null;\n      }\n      let res = parts.map((pt) => {\n        return parseFloat(pt)\n      });\n      return res;\n    },\n    openPotreeSidebar: function(){\n      if (window.$('#potree_render_area').position().left <= 0){\n        window.$(\".potree_menu_toggle\").click()\n      }\n    },\n    closePotreeSidebar: function(){\n      if (window.$('#potree_render_area').position().left > 0){\n        window.$(\".potree_menu_toggle\").click()\n      }\n    },\n    selectGalleryImage: function (imgUID) {\n      this.closePotreeSidebar();\n      this.selectedImageUid = imgUID; // this.images[imgUID];\n      const conf = this.galleryItemsConfig[imgUID];\n      if (conf) {\n        if (conf.viewTarget && conf.viewPosition) {\n          this.viewer.setCameraMode(conf.cameraMode); //window.Potree.CameraMode.ORTHOGRAPHIC);\n          this.viewer.scene.view.setView(this.csvToFloatList(conf.viewPosition), this.csvToFloatList(conf.viewTarget));\n          this.viewer.setFOV(conf.fov || this.defaultFOV);\n        }\n      }\n    },\n    closeGalleryImage: function () {\n      this.selectedImageUid = null;\n      this.viewer.setFOV(this.defaultFOV);\n    },\n    saveOrientationOnSelectedImage: function (imgUID) {\n      const cameraPositionStr = this.viewer.scene.view.position.toArray().toString();\n      const targetStr = this.viewer.scene.view.getPivot().toArray().toString();\n      const cameraMode = this.viewer.scene.cameraMode;\n      const fov = this.viewer.getFOV();\n      if (!this.galleryItemsConfig[imgUID]) {\n        this.galleryItemsConfig[imgUID] = {}\n      }\n      this.galleryItemsConfig[imgUID].viewTarget = targetStr;\n      this.galleryItemsConfig[imgUID].viewPosition = cameraPositionStr;\n      this.galleryItemsConfig[imgUID].cameraMode = cameraMode;\n      this.galleryItemsConfig[imgUID].browserWidth = document.documentElement.clientWidth;\n      this.galleryItemsConfig[imgUID].browserHeight = document.documentElement.clientHeight;\n      this.galleryItemsConfig[imgUID].fov = fov;\n      this.saveConfigOnServer();\n    },\n    parentMessage:function(e){\n      console.log(e);\n       if (e.data.func == 'explode') {\n         const val = e.data.value;\n          this.setExplosionStep(val);\n      }\n       if (e.data.func == 'gallery') {\n         const val = e.data.value;\n         this.galleryOpen = val;\n      }\n       if (e.data.func == 'gpr'){\n         const val = e.data.value;\n         this.openPotreeSidebar();\n         this.depictionsOpen = val;\n       }\n\n    },\n    render: function () {\n      this.viewer.renderer.render(this.viewer.scene.scene, this.viewer.scene.getActiveCamera());\n    }\n  }\n}\n</script>\n\n<style src=\"@vueform/toggle/themes/default.css\"></style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4d2d4bdb&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"@vueform/toggle/themes/default.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport AdminApp from './App.vue'\nimport VueCompositionAPI from '@vue/composition-api'\nVue.use(VueCompositionAPI)\n\n\nVue.config.productionTip = false\n\n// import App from './App.vue'\n//\n// new Vue({\n//   render: h => h(App),\n// }).$mount('#app')\n\nlet $ = window.$;\nlet Potree = window.Potree;\nwindow.viewer = new Potree.Viewer(document.getElementById(\"potree_render_area\"));\nconst visConfig = JSON.parse(document.getElementById('visConfig').textContent); //Gets pointcloud json config generated from django template tag above\n\nlet viewer = window.viewer;\nviewer.setFOV(60);\nviewer.setPointBudget(1 * 1000 * 1000);\nviewer.setMinNodeSize(0);\n//viewer.loadSettingsFromURL();\nviewer.setDescription(visConfig.title);\n\n\nconst { menuConf, visConf } = visConfig;\nif (menuConf.toolsEnabled){\n    viewer.loadGUI().then(() => {\n        viewer.setLanguage('en');\n        if (!menuConf.showTools){\n            $(\"#menu_tools\").next().html(\"\");\n            $(\"#menu_tools\").hide();\n        }\n        if (!menuConf.showScene){\n            $(\"#menu_scene\").next().html(\"\");\n            $(\"#menu_scene\").hide();\n        }\n        if (!menuConf.showFilters){\n            $(\"#menu_filters\").next().html(\"\");\n            $(\"#menu_filters\").hide();\n        }\n        if (!menuConf.showAbout){\n            $(\"#menu_about\").next().html(\"\");\n            $(\"#menu_about\").hide();\n        }else{\n            $(\"#menu_about\").html(\"About Potree\");\n        }\n        if (!menuConf.showAppearance){\n            $(\"#menu_appearance\").next().html(\"\");\n            $(\"#menu_appearance\").hide();\n        }\n\n        let content, section, sections = [];\n        if (visConf.description){\n            let section = $(`\n            <h3 id=\"menu_model_description\" class=\"accordion-header ui-widget\"><span>About the Project</span></h3>\n            <div class=\"accordion-content ui-widget pv-menu-list p-2\"></div>\n            `);\n            let content = section.last();\n            content.html(visConf.description);\n            section.first().click(() => content.slideToggle());\n            sections.push(section);\n        }\n        section = $(`\n        <h3 id=\"menu_meta\" class=\"accordion-header ui-widget\"><span>CYI Tools</span></h3>\n        <div class=\"accordion-content ui-widget pv-menu-list\"></div>\n        `);\n        content = section.last();\n        content.html(`\n        <div id=\"cyi-app\">\n        </div>\n        `);\n        section.first().click(() => content.slideToggle());\n        sections.push(section);\n\n        sections.forEach(section => $('#potree_menu').append(section));\n        //section.insertBefore($('#menu_about'));\n\n        new Vue({\n          render: h => h(AdminApp),\n        }).$mount('#cyi-app');\n\n\n    });\n}"],"sourceRoot":""}